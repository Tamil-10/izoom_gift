$(document).on("click",".ord-his",function(){$(".ongoing-orders-tab").addClass("hide"),$(".my-order-history-tab").removeClass("hide"),$(this).addClass("text-red"),$(".on-going-ord").removeClass("text-red"),$("html,body").animate({scrollTop:$("#my-order-history-tab").offset().top},"slow")}),$(document).on("click",".scroll-ongoing",function(e){$(".ongoing-orders-tab").removeClass("hide"),$(".my-order-history-tab").addClass("hide"),e.preventDefault(),$("html,body").animate({scrollTop:$(".scroll-stop").offset().top-63},"slow")}),$(document).on("click",".scroll-history",function(e){$(".my-order-history-tab").removeClass("hide"),$(".ongoing-orders-tab").addClass("hide"),e.preventDefault(),$("html,body").animate({scrollTop:$(".scroll-stop").offset().top-63},"slow")}),$(document).on("click",".on-going-ord",function(){$(".my-order-history-tab").addClass("hide"),$(".ongoing-orders-tab").removeClass("hide"),$(this).addClass("text-red"),$(".ord-his").removeClass("text-red"),$("html,body").animate({scrollTop:$("#ongoing-orders-tab").offset().top},"slow")});var color="#",letters=["FF005E","AF00AF","4C5FF6","00AC59","FF2D00","B000B0"];color+=letters[Math.floor(Math.random()*letters.length)],document.getElementById("posts")&&(document.getElementById("posts").style.background=color),$(document).ready(function(){$("ul.tabs").tabs()});;
function selectCountryHandler(e){var t=e;console.log("onchange");var i=$(t).parents("form").find("input[name=pcode]").val();console.log("pincode "+i);var a=$(t).parents("form").find("input[name=cid]").val();console.log("new pincode: "+a),"99"==a?($(t).parents("form").find('input[name="pcode"]').attr({minlength:"5",maxlength:"6"}),$(t).parents("form").find('input[name="mob"]').attr({minlength:"10",maxlength:"10"}),$(t).parents("form").find('input[name="mob"]').addClass("mobile"),console.log("yes 99"),6==i.length&&(console.log("inside chk"),$.ajax({url:"/api/user/address?cid="+a+"&pin="+i,method:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){console.log("before pin send")},success:function(e,i,a){console.log("yes. inside api call"),console.log("json of pincode "+JSON.stringify(e)),$(t).parents("form").find('input[name="state"]').val(e.state),$(t).parents("form").find('input[name="city"]').val(e.city)},complete:function(e,t){}}))):($(t).parents("form").find('input[name="pcode"]').attr({minlength:"1",maxlength:"6"}),$(t).parents("form").find('input[name="mob"]').attr({minlength:"4",maxlength:"13"}),$(t).parents("form").find('input[name="mob"]').removeClass("mobile"),$(t).parents("form").find('input[name="state"]').val(""),$(t).parents("form").find('input[name="city"]').val(""))}$(document).ready(function(){function e(e,t){$.ajax({url:"/userStatusCheck",method:"POST",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,beforeSend:function(e){console.log("before Send")},success:function(e,i,a){console.log(JSON.stringify(e)),v=1,e.data.login?($(".sec-content").hide(),$(".c-l-field").addClass("active"),$(".c-l-field").attr("disabled",!1)):($(".sec-content").hide(),$(".c-l-field").addClass("active"),$(".c-s-field").addClass("active"),$(".c-l-field").attr("disabled",!1),$(".c-s-field").attr("disabled",!1),$("#c-l-submit").text("Sign Up")),t(e.data)},error:function(e){console.log("error")}})}function t(e,t){console.log("test"),$.ajax({url:"/login",method:"POST",data:e,contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){console.log("before Send")},success:function(e,t,i){console.log(JSON.stringify(e)),e.data.l?location.reload(!0):console.log(e.data.msg)},error:function(e){console.log("error")}})}function i(e,t){console.log(e),$.ajax({url:"/signup",method:"POST",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){console.log("before send")},success:function(e,i,a){console.log(JSON.stringify(e)),t(e)},error:function(e){console.log("error")}})}function a(e){$.ajax({url:"/updateProfile",method:"POST",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){console.log("before send")},success:function(e,t,i){console.log(JSON.stringify(e)),"Success"===e.status&&e.data.l&&location.reload(!0)},error:function(e){console.log("error")}})}function s(e){var t=new Date(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),a=i.toISOString().slice(0,10).replace(/-/g,"");return a}function o(e,t){e=JSON.parse(e),$.ajax({url:"/shippingAddrBook",method:"POST",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){console.log("before send"),$("#signup-process-overlay").addClass("active")},success:function(e,i,a){"empty"===e?($("#address-empty").removeClass("hide"),$("#address-container").addClass("hide")):($("#address-empty").addClass("hide"),$("#address-container").removeClass("hide"),$("#create-s-address")[0].reset(),$("#create-s-address  .c-inline-label").removeClass("active"),t(e))},error:function(e){console.log("error")}})}function n(e,t,i){$.ajax({url:"/updateAddrBook",method:"PUT",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){console.log("before send"),$("#process-overlay-"+t).addClass("active")},success:function(e,t,a){console.log(JSON.stringify(e)),i(e)},error:function(e){console.log("error")}})}function r(e,t){$.ajax({url:"/baddrs",method:"POST",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){console.log("before send"),$(".b-form-overlay").addClass("show")},success:function(e,i,a){console.log(JSON.stringify(e)),t(e)},error:function(e){console.log("error")}})}function l(e,t){var i={adrsid:e};$.ajax({url:"/ordTemp",method:"POST",data:JSON.stringify(i),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){console.log("before send")},success:function(e,i,a){$("#summary").html(e),t()},error:function(e){console.log("error")}})}function c(e,t){var i={aid:e};$.ajax({url:"/shippingAddrBook",method:"delete",data:JSON.stringify(i),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(t){console.log("before send"),$("#process-overlay-"+e).addClass("active")},success:function(e,i,a){"empty"===e?($("#address-empty").removeClass("hide"),$("#address-container").addClass("hide"),$(".c-sign-up-container").addClass("active"),$(".c-out-overlay").addClass("active")):($("#address-empty").addClass("hide"),$("#address-container").removeClass("hide"),t(e))},error:function(e){console.log("error")}})}function d(e,t){$.ajax({url:"/summary/product/update",method:"PUT",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(t){console.log("before send"),$("#c-item-u-overlay-"+e.pid).addClass("show")},success:function(e,i,a){console.log(e),t(e)},error:function(e){console.log("error")}})}function p(e,t){$.ajax({url:"/summary/product/update",method:"DELETE",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(t){console.log("before send"),$("#c-item-u-overlay-"+e.pid).addClass("show")},success:function(e,i,a){console.log(e),t(e)},error:function(e){console.log("error")}})}function u(e,t){$.ajax({url:"/summary/discount",method:"POST",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){console.log("before send"),$("#cart-overlay").addClass("show")},success:function(e,i,a){console.log(e),"error"===e.status?($("#coupon-message").text(e.message),$("#cart-overlay").removeClass("show")):t(e)},error:function(e){console.log("error")}})}function h(e,t){$.ajax({url:"/summary/discount",method:"DELETE",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){console.log("before send"),$("#cart-overlay").addClass("show")},success:function(e,i,a){console.log(e),"error"===e.status?$("#coupon-message").text(e.message):t(e)},error:function(e){console.log("error")}})}function m(e){var t=0,i=e.find("input[name=ccnum]"),a=e.find("input[name=ccname]"),s=e.find("select[name=ccmonth]"),o=e.find("select[name=ccyear]"),n=e.find("input[name=ccvv]");return $.payment.validateCardNumber(i.val())?i.removeClass("error"):(i.addClass("error"),t++),$.payment.validateCardCVC(n.val())?n.removeClass("error"):(n.addClass("error"),t++),a.val().length<3?(a.addClass("error"),t++):a.removeClass("error"),$.payment.validateCardExpiry(s.val(),o.val())?(s.removeClass("error"),o.removeClass("error")):(s.addClass("error"),o.addClass("error"),t++),!(t>0)}$(".close-svg").click(function(){$(".c-out-overlay").removeClass("active"),$(".c-sign-up-container").removeClass("active")}),$(".ship-pincode-chk").focusout(function(){var e=$(this).data("pin-attr"),t=$("#ship-pincode-"+e).val();console.log("pincode "+t);var i=$("#ship-country-code-"+e).val();console.log("new pincode: "+i),"99"==i&&(console.log("yes 99"),6==t.length&&$.ajax({url:"/api/user/address?cid="+i+"&pin="+t,method:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){console.log("before pin send")},success:function(t,i,a){console.log("yes. inside api call"),console.log("json of pincode "+JSON.stringify(t)),$("#ship-state-"+e).val(t.state),$("#ship-city-"+e).val(t.city)},complete:function(e,t){}}))}),$(".ship-country-code").change(function(){console.log("onchange");var e=$(this).data("country-attr"),t=$("#ship-pincode-"+e).val();console.log("pincode "+t);var i=$("#ship-country-code-"+e).val();console.log("new pincode: "+i),"99"==i&&(console.log("yes 99"),6==t.length&&(console.log("inside chk"),$.ajax({url:"/api/user/address?cid="+i+"&pin="+t,method:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){console.log("before pin send")},success:function(t,i,a){console.log("yes. inside api call"),console.log("json of pincode "+JSON.stringify(t)),$("#ship-state-"+e).val(t.state),$("#ship-city-"+e).val(t.city)},complete:function(e,t){}})))}),$("ul.tabs").tabs(),$(".datepicker").pickadate({}),$("#site-wrapper").on("click","#sign-up-text",function(e){$(".c-out-overlay").addClass("active"),$(".c-sign-up-container").addClass("active")}),$("#site-wrapper").on("click",".c-out-overlay",function(e){$(".c-out-overlay").removeClass("active"),$(".c-sign-up-container").removeClass("active")}),$("#site-wrapper").on("click","#goto-fpass",function(){$("#f-pass-flow").show(),$("#login-flow").hide()}),$("#site-wrapper").on("click","#goto-login",function(){$("#f-pass-flow").hide(),$("#login-flow").show()}),document.addEventListener("keydown",function(e){var t=e.keyCode||e.which;27===t&&($(".c-out-overlay").removeClass("active"),$(".c-sign-up-container").removeClass("active"))}),$("#site-wrapper").on("click",".deliver",function(){$(".address-card").removeClass("selected"),$(".address-item-overlay").removeClass("active"),$(".address-item-conf").removeClass("active"),$(".icon").removeClass("editing");var e=$(this).data("aid");$(this).addClass("selected");$(this).text();$(".icon-"+e).addClass("editing"),$("#address-card-"+e).addClass("selected"),$("#address-item-overlay-"+e).addClass("active"),$("#address-item-conf-"+e).addClass("active")}),$("#site-wrapper").on("click",".address-item-overlay",function(){var e=$(this).data("aid");$(".icon-"+e).removeClass("editing"),$("#address-item-overlay-"+e).removeClass("active"),$("#address-item-conf-"+e).removeClass("active")}),$("#site-wrapper").on("click",".address-item-conf",function(e){e.stopPropagation()}),$("#site-wrapper").on("click",".d-b-address",function(){var e=$(this).data("aid");console.log(e);var t=$(".address-list-item").length;$("#b-address-form").attr("data-aid",e),console.log($("#b-address-form").data("aid")),t>1?$(".address-list-item").each(function(t,i){$(this).data("aid")!=e&&$(this).velocity({translateY:"100%"},{duration:300,complete:function(t){$(t).hide(),$(".b-address-list-item").addClass("active"),$("#a-n-address-w").addClass("hide"),$("#c-s-address-w").removeClass("hide"),$(".icon-"+e).removeClass("editing"),$("#address-item-overlay-"+e).removeClass("active"),$("#address-item-conf-"+e).removeClass("active"),$(".icon-"+e).addClass("disabled"),$("#deliver-btn-"+e).addClass("move-down")}})}):(console.log("test"),$(".b-address-list-item").addClass("active"),$("#a-n-address-w").addClass("hide"),$("#c-s-address-w").removeClass("hide"),$(".icon-"+e).removeClass("editing"),$("#address-item-overlay-"+e).removeClass("active"),$("#address-item-conf-"+e).removeClass("active"),$(".icon-"+e).addClass("disabled"),$("#deliver-btn-"+e).addClass("move-down"))}),$("#site-wrapper").on("click","#a-n-address",function(e){$(".c-out-overlay").addClass("active"),$(".c-sign-up-container").addClass("active")}),$("#site-wrapper").on("click","#c-s-address",function(e){$(".b-address-list-item").removeClass("active"),$(".address-list-item").show(),$(".address-list-item").velocity({translateY:"0"},{duration:300,complete:function(e){$("#c-s-address-w").addClass("hide"),$("#a-n-address-w").removeClass("hide"),$(".icon").removeClass("disabled"),$(".deliver").removeClass("move-down")}})}),$("#site-wrapper").on("click",".address-actions-delete",function(){var e=$(this).data("aid");$("#d-address-overlay-"+e).addClass("active")}),$("#site-wrapper").on("click",".cancel-delete",function(){var e=$(this).data("aid");$("#d-address-overlay-"+e).removeClass("active")}),$("#site-wrapper").on("click",".address-actions-edit",function(){var e=$(this).data("aid");$("#address-area-"+e).addClass("hide"),$("#address-form-"+e).removeClass("hide"),$("#address-card-"+e).removeClass("bg-light-gray"),$("#address-card-"+e).addClass("bg-white"),$("#a-title-"+e).addClass("hide"),$("#e-title-"+e).removeClass("hide"),$("#deliver-btn-"+e).addClass("hide")}),$("#site-wrapper").on("click",".address-actions-cancel",function(){var e=$(this).data("aid");$("#address-area-"+e).removeClass("hide"),$("#address-card-"+e).removeClass("bg-white"),$("#address-card-"+e).addClass("bg-light-gray"),$("#address-form-"+e).addClass("hide"),$("#a-title-"+e).removeClass("hide"),$("#e-title-"+e).addClass("hide"),$("#deliver-btn-"+e).removeClass("hide")});var f,v=0;$("#site-wrapper").on("submit","#c-login-flow",function(o){var n,r=$("#user-e-m").val(),l={};if(v){console.log(f);var c=$(this).fmValidate.init("#c-login-flow");if(c){var d=processData($("#c-login-flow").serializeArray());if(console.log(d),f)t(d);else{var p=JSON.parse(d);console.log(p.dob),p.dob=s(p.dob);var u={email:p.email,passwd:p.passwd,mob:p.mob},h={email:p.email,fname:p.fname,lname:p.lname,dob:p.dob};i(u,function(e){"Success"===e.status&&e.data.l&&a(h)})}}o.preventDefault()}else o.preventDefault(),n=$.fn.fmValidate.checkType(r),n?$(this).fmValidate.init("#c-login-flow")&&("email"==n?($("#user-e-m").attr("name","email"),$("#user-e-m").attr("placeholder","enter email address"),l.email=r):"mobile"==n&&($("#user-e-m").attr("name","mob"),$("#user-e-m").attr("placeholder","enter mobile number"),$("#user-e-m-2").attr("name","email"),$("#user-e-m-2").attr("placeholder","enter email address"),delete l.email,l.mob=r),console.log(l),e(l,function(e){f=e.login})):$("#user-e-m").addClass("error")}),$("#site-wrapper").on("submit","#c-signup-form",function(e){e.preventDefault();var t={},o={},n=JSON.parse(processData($(this).serializeArray()));$(this).fmValidate.init("#c-signup-form")&&(n.dob=s(n.dob),t={email:n.email,passwd:n.passwd,mob:n.mob},o={email:n.email,fname:n.fname,lname:n.lname,dob:n.dob},i(t,function(e){"Success"===e.status&&e.data.l&&a(o)}))}),$("#site-wrapper").on("submit","#create-s-address",function(e){e.preventDefault();var t='<li class="address-list-item" id="address-list-item"><div class="bg-light-gray address-card z-depth-1"><h6 class="c-title sign-up-text2 u-case address-book-text-middle" id="a-n-address">Add a New Address</h6></div></li>';if($(this).fmValidate.init("#create-s-address"))if("99"==$("#new-country-code").val())if(6==$("#new-pincode-chk").val().length){var i=processData($(this).find("select, textarea, input[name != cname]").serializeArray());console.log(i),o(i,function(e){$("#signup-process-overlay").removeClass("active"),$(".c-out-overlay").removeClass("active"),$(".c-sign-up-container").removeClass("active"),$("#address-list").html(e),$("#address-list").append(t),$("#address-count").text($(".address-list-item").length),$("#b-address-form .c-inline-label").addClass("active")})}else $("#new-pincode-chk").addClass("error"),$("#new-pincode-chk").addClass("error error-animation"),setTimeout(function(){$("#new-pincode-chk").removeClass("error-animation")},300);else{var i=processData($(this).find("select, textarea, input[name != cname]").serializeArray());console.log(i),o(i,function(e){console.log("Test"),$("#signup-process-overlay").removeClass("active"),$(".c-out-overlay").removeClass("active"),$(".c-sign-up-container").removeClass("active"),$("#address-list").html(e),$("#address-list").append(t),$("#address-count").text($(".address-list-item").length),$("#b-address-form .c-inline-label").addClass("active")})}}),$("#site-wrapper").on("submit",".edit-form",function(e){e.preventDefault();var t=$(this).data("form");if(console.log("form id  ...."+t),$.fn.fmValidate.init("#e-form-"+t))if("99"==$("#ship-country-code-"+t).val()){var t=$(this).data("form"),i=$("#ship-pincode-"+t).val();if(console.log("chkpin ..... "+i),"6"!=i.length)return $("#ship-pincode-"+t).addClass("error"),$("#ship-pincode-"+t).addClass("error error-animation"),setTimeout(function(){$("#ship-pincode-"+t).removeClass("error-animation")},300),console.log("The field should have 6 digits"),!1;var a=processData($(this).find("select, textarea, input[name != cname]").serializeArray());console.log(a),n(JSON.parse(a),t,function(e){$("#process-overlay-"+t).removeClass("active"),$("#address-list-item-"+t).html(e)})}else{var a=processData($(this).find("select, textarea, input[name != cname]").serializeArray());console.log(a),n(JSON.parse(a),t,function(e){$("#process-overlay-"+t).removeClass("active"),$("#address-list-item-"+t).html(e)})}}),$("#site-wrapper").on("click",".proceed-text",function(e){var t=$(this).data("aid");console.log(t),l(t,function(){$("#d-info-tab").addClass("active"),$("#d-info-item").addClass("complete"),$("#o-summary-item").removeClass("disabled"),$("ul.tabs").tabs("select_tab","summary")})}),$("#site-wrapper").on("submit","#b-address-form",function(e){if(e.preventDefault(),$.fn.fmValidate.init("#b-address-form")){var t=processData($(this).serializeArray()),i=$(this).data("aid");t=JSON.parse(t),console.log(t),r(t,function(e){l(i,function(){$(".b-form-overlay").removeClass("show"),$("#d-info-tab").addClass("active"),$("#d-info-item").addClass("complete"),$("#o-summary-item").removeClass("disabled"),$("ul.tabs").tabs("select_tab","summary")})})}}),$("#site-wrapper").on("click",".remove-address",function(){var e=$(this).data("aid"),t='<li class="address-list-item" id="address-list-item"><div class="bg-light-gray address-card z-depth-1"><h6 class="c-title sign-up-text2 u-case address-book-text-middle" id="a-n-address">Add a New Address</h6></div></li>';c(e,function(e){$("#address-list").html(e),$("#address-count").text($(".address-list-item").length),$("#address-list").append(t)})}),$("#site-wrapper").on("change",".g-box",function(){var e=$(this).data("pid"),t=processData($("#product-"+e).serializeArray()),i=JSON.parse(t);$(this).prop("checked")?i.gbox=1:i.gbox=0,console.log(i),d(i,function(e){$("#summary").html(e)})}),$("#site-wrapper").on("click",".inc-quantity",function(e){var t=$(this).data("pid"),i=parseInt($("#c-item-qty-"+t).val()),a=processData($("#product-"+t).serializeArray()),s=JSON.parse(a);s.qty=i+1,console.log(t),console.log(s),s.qty>=10?$("#c-item-qty-error-"+t).addClass("show-error"):($("#c-item-qty-error-"+t).removeClass("show-error"),d(s,function(e){$("#summary").html(e)}))}),$("#site-wrapper").on("click",".des-quantity",function(e){var t=$(this).data("pid"),i=parseInt($("#c-item-qty-"+t).val()),a=processData($("#product-"+t).serializeArray());if(i>1&&10>=i){$("#c-item-qty-error-"+t).removeClass("show-error");var s=JSON.parse(a);s.qty=i-1;console.log("data"),d(s,function(e){$("#summary").html(e)})}else if(1==i){$("#c-item-qty-error-"+t).removeClass("show-error");var t=$(this).data("pid");$("#c-item-overlay-"+t).addClass("c-show")}else $("#c-item-qty-error-"+t).addClass("show-error")}),$("#site-wrapper").on("keypress",".qty",function(e){if(13==e.keyCode){var t=$(this).data("pid"),i=parseInt($("#c-item-qty-"+t).val());if(i>0){console.log("hitting update");var a=processData($("#product-"+t).serializeArray()),s=JSON.parse(a);s.qty=i;s.qty>=10?$("#c-item-qty-error-"+t).addClass("show-error"):($("#c-item-qty-error-"+t).removeClass("show-error"),d(s,function(e){$("#summary").html(e)}))}else 0==i&&$("#c-item-overlay-"+t).addClass("c-show")}}),$("#site-wrapper").on("focusout",".qty",function(e){var t=$(this).data("pid"),i=$(this).data("qty"),a=$(this).val();if(""==a)$(this).val(i);else if(a!==i){var s=parseInt($("#c-item-qty-"+t).val()),o=processData($("#product-"+t).serializeArray()),n=JSON.parse(o);n.qty=s;n.qty>=10?$("#c-item-qty-error-"+t).addClass("show-error"):($("#c-item-qty-error-"+t).removeClass("show-error"),d(n,function(e){$("#summary").html(e)}))}}),$("#site-wrapper").on("click",".del-c-item",function(){var e=$(this).data("pid");$("#c-item-overlay-"+e).addClass("c-show")}),$("#site-wrapper").on("click",".cancel",function(){var e=$(this).data("pid");$("#c-item-overlay-"+e).removeClass("c-show")}),$("#site-wrapper").on("click",".remove-c",function(){var e={pid:$(this).data("pid")};p(e,function(e){$("#summary").html(e)})}),$("#site-wrapper").on("submit","#coupon-form",function(e){if(e.preventDefault(),$(this).fmValidate.init("#coupon-form")){var t=processData($(this).serializeArray());console.log(t),t=JSON.parse(t),u(t,function(e){$("#summary").html(e)})}}),$("#site-wrapper").on("change",".d-type",function(e){var t=$(this).data("pid"),i=$(this).data("stype"),a=processData($("#product-"+t).serializeArray());a=JSON.parse(a),a.stype=i,console.log(a),$(this).prop("checked")&&d(a,function(e){$("#summary").html(e)})}),$("#site-wrapper").on("click","#remove-coupon",function(e){var t=processData($("#coupon-form").serializeArray());t=JSON.parse(t),h(t,function(e){$("#summary").html(e)})}),$("#site-wrapper").on("click","#proceed-payment",function(){$("#o-summary-tab").addClass("active"),$("#o-summary-item").addClass("complete"),$("#payment-item").removeClass("disabled"),$("ul.tabs").tabs("select_tab","payment")}),$("#site-wrapper").on("click",".v-tab",function(){$(".v-tab").removeClass("active"),$(this).addClass("active");var e=$(this).data("target");$(".v-tab-content").addClass("hide"),$("#"+e).removeClass("hide")}),$("#site-wrapper").on("keypress, input",".cc-number",function(e){var t=$(this),i=$.payment.cardType($(".cc-number").val());null!=i?(t.next().addClass(i),t.next().addClass("p-type-icon")):null==i&&t.next().removeAttr("class")}),$("#site-wrapper").on("submit","#c-card-form",function(e){var t=m($(this));if(!t)return!1;var i=$(this).find("input[name='pg']").val();return $.ajax({url:"/payment",method:"POST",contentType:"application/json; charset=UTF-8",data:'{"option":"'+i+'"}',async:!1,success:function(e){}}),!0}),$("#new-pincode-chk").focusout(function(){var e=$("#new-pincode-chk").val();console.log("pincode "+e);var t=$("#new-country-code").val();console.log("new pincode: "+t),"99"==t&&(console.log("yes 99"),6==e.length&&$.ajax({url:"/api/user/address?cid="+t+"&pin="+e,method:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){console.log("before pin send")},success:function(e,t,i){console.log("yes. inside api call"),console.log("json of pincode "+JSON.stringify(e)),$("#new-state").val(e.state),$("#new-city").val(e.city)},complete:function(e,t){}}))}),$(".ship-country-code").change(function(){console.log("onchange");var e=$(this).data("country-attr"),t=$("#ship-pincode-"+e).val();console.log("pincode "+t);var i=$("#ship-country-code-"+e).val();console.log("new pincode: "+i),"99"==i?(console.log("yes 99"),6==t.length&&(console.log("inside chk"),$.ajax({url:"/api/user/address?cid="+i+"&pin="+t,method:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){console.log("before pin send")},success:function(t,i,a){console.log("yes. inside api call"),console.log("json of pincode "+JSON.stringify(t)),$("#ship-state-"+e).val(t.state),$("#ship-city-"+e).val(t.city)},complete:function(e,t){}}))):($(this).parents("form").find('input[name="pcode"]').attr({minlength:"1",maxlength:"6"}),$(this).parents("form").find('input[name="mob"]').removeClass("mobile"))})});;
$(".couponBgImage").css("background-image","url("+cdn.bannersURL+"coupon-code-gen-image.jpg)"),$(document).ready(function(){$(".coupon-container").on("submit","#coupon-generate-form",function(){var e=processData($(this).serializeArray()),t=JSON.parse(e).email;return $.ajax({url:"/api/generateVoucher",method:"POST",data:e,contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){$("#m-mask").addClass("is-active")},success:function(e,i,a){if("Success"===e.status){var s=e.data.voucherCode;window.location="coupon?email="+t+"&vcode="+s}else $("#m-mask").removeClass("is-active"),$(".create-coupon #coupon-generate-form").hide(),$(".create-coupon .start-shooping").show(),$(".coupon-error").text("Email address not valid for this offer"),console.log("error")},error:function(e){console.log("error")}}),!1})});;
function convertDate(e){var t=new Date(e),i="",a=t.getDate();10>a&&(a="0"+a),a=a.toString();var s=t.getFullYear().toString(),o=t.getMonth()+1;return 10>o&&(o="0"+o),o=o.toString(),i=s+o+a,console.log(i),i}$(document).on("click",".edit-pencil",function(){$(".edit-name-default").addClass("hide"),$(".edit-name-input").removeClass("hide")}),$(document).ready(function(){$(".countrySuggest").autocomplete({source:"/api/countrySuggest",minLength:2,focus:function(e,t){return $(".countrySuggest").val(t.item.code),!1},select:function(e,t){return $("input[name=mprefix]").val(t.item.mprefix),$("span.mprefixLabel").text(t.item.mprefix),$("input[name=cid]").val(t.item.id),!1}}).autocomplete("instance")._renderItem=function(e,t){return $("<li class='autocomplete-items redHover'>").append("<span>"+t.name+"</span>").appendTo(e)}});var finaloldPasswd="";$(".old-passwd").keypress(function(e){$(".pass-error").addClass("hide"),$(".pass-success").addClass("hide"),$(".new-p").removeClass("hide"),$(".change-passwd").removeClass("hide")}),$(".old-passwd").focusin(function(e){$(".pass-success").addClass("hide"),$(".pass-error").addClass("hide"),$(".old-err").addClass("hide")}),$(".new-passwd").focusin(function(e){$(".new-err").addClass("hide")}),$(document).on("click",".change-passwd-btn",function(){var e=0,t={},i=$(".old-passwd").val(),a=$(".new-passwd").val();i.length>=6?t.passwd=i:($(".old-passwd").addClass("error error-border error-animation"),setTimeout(function(){$(".old-passwd").removeClass("error-animation error-border ")},500),$(".old-err").removeClass("hide"),e=1),a.length>=6?t.npasswd=a:($(".new-passwd").addClass("error error-border error-animation"),setTimeout(function(){$(".new-passwd").removeClass("error-animation error-border ")},500),e=1,$(".new-err").removeClass("hide")),0==e&&$.ajax({url:"/api/change-password",method:"PUT",dataType:"json",data:JSON.stringify(t),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){},success:function(e,t,i){console.log(JSON.stringify(e)),"Success"==e.status?(console.log("success"),$(".input-edit-passwd").val(""),$(".new-p").addClass("hide"),$(".change-passwd").addClass("hide"),$(".pass-success").removeClass("hide")):(console.log("failure"),$(".input-edit-passwd").val(""),$(".new-p").addClass("hide"),$(".change-passwd").addClass("hide"),$(".pass-error").removeClass("hide"))},complete:function(e,t){}})}),$(".new-passwd").keypress(function(e){var t=0,i={};if(13==e.keyCode){var a=$(".old-passwd").val(),s=$(".new-passwd").val();a.length>=6?i.passwd=a:($(".old-passwd").addClass("error error-border error-animation"),setTimeout(function(){$(".old-passwd").removeClass("error-animation error-border ")},500),t=1),s.length>=6?i.npasswd=s:($(".new-passwd").addClass("error error-border error-animation"),setTimeout(function(){$(".new-passwd").removeClass("error-animation error-border ")},500),t=1),0==t&&$.ajax({url:"/api/change-password",method:"PUT",dataType:"json",data:JSON.stringify(i),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){},success:function(e,t,i){console.log(JSON.stringify(e)),"Success"==e.status?(console.log("success"),$(".input-edit-passwd").val(""),$(".new-p").addClass("hide"),$(".change-passwd").addClass("hide"),$(".pass-success").removeClass("hide")):(console.log("failure"),$(".input-edit-passwd").val(""),$(".new-p").addClass("hide"),$(".change-passwd").addClass("hide"),$(".pass-error").removeClass("hide"))},complete:function(e,t){}})}});var today=new Date;$(".dob-date").pickadate({format:"dd-mmm-yyyy",format_submit:"yyyy-mm-dd",selectYears:100,selectMonths:!0,today:"",clear:"",close:"",max:!0,disable:[!0,{from:[today.getFullYear()-100,today.getMonth(),today.getDate()],to:[today.getFullYear(),today.getMonth(),today.getDate()]}],onSet:function(){$(".mid-night-date").removeClass("error");var e=this.get("select");console.log(e)}}),$(document).on("click",".edit-dob",function(){$("#datepicker-dob").trigger("click")}),$(document).on("click",".save-user-navigate",function(){var e=0,t={},i=$(".edit-fname").val();i=i.trim(),i&&i.length<=20?t.fname=i:($(".edit-fname").addClass("error error-border error-animation"),setTimeout(function(){$(".edit-fname").removeClass("error-animation error-border ")},500),$("html,body").animate({scrollTop:0},"fast"),e=1);var a=$(".edit-lname").val();a=a.trim(),a&&a.length<=20?t.lname=a:($(".edit-lname").addClass("error error-border error-animation"),setTimeout(function(){$(".edit-lname").removeClass("error-animation error-border ")},500),$("html,body").animate({scrollTop:0},"fast"),e=1);var s=$("#datepicker-dob").val();s?t.dob=convertDate(s):($("#datepicker-dob").addClass("error error-animation"),setTimeout(function(){$("#datepicker-dob").removeClass("error-animation")},500),$("html,body").animate({scrollTop:0},"fast"),e=1),t.image=$(".cover-name").data("cover-name"),console.log(JSON.stringify(t)),0==e&&$.ajax({url:"/api/user/:id",method:"PUT",dataType:"json",data:JSON.stringify(t),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){},success:function(e,t,i){console.log(JSON.stringify(e)),"Success"==e.status?(console.log("success"),window.location.assign("/myprofile")):console.log("failure")},complete:function(e,t){}})}),$(document).on("click",".save-user",function(){var e=0,t={},i=$(".edit-fname").val();i=i.trim(),i&&i.length<=20?t.fname=i:($(".edit-fname").addClass("error error-border error-animation"),setTimeout(function(){$(".edit-fname").removeClass("error-animation error-border ")},500),$("html,body").animate({scrollTop:0},"fast"),e=1);var a=$(".edit-lname").val();a=a.trim(),a&&a.length<=20?t.lname=a:($(".edit-lname").addClass("error error-border error-animation"),setTimeout(function(){$(".edit-lname").removeClass("error-animation error-border ")},500),$("html,body").animate({scrollTop:0},"fast"),e=1),$("#user-g").length&&(""===$("#user-g").val()?($("#user-g").addClass("error error-border error-animation"),setTimeout(function(){$("#user-g").removeClass("error-animation error-border ")},500),$("html,body").animate({scrollTop:0},"fast"),e=1):t.g=$("#user-g").val());var s=$("#datepicker-dob").val();if(s&&(t.dob=convertDate(s)),t.image=$(".cover-name").data("cover-name"),console.log(JSON.stringify(t)),""!==$("#user-mob").val()||""!==$("#user-mprefix").val()||""!==$("#user-cname").val()){if(""===$("#user-mob").val()||0===parseInt($("#user-mob").val()))return $("#user-mob").addClass("error error-border error-animation"),setTimeout(function(){$("#user-mob").removeClass("error-animation error-border")},500),!1;if(""===$("#user-mprefix").val()||0===parseInt($("#user-mprefix").val()))return $("#user-mprefix").addClass("error error-border error-animation"),setTimeout(function(){$("#user-mprefix").removeClass("error-animation error-border ")},500),!1;if(""===$("#user-cname").val())return $("#user-cname").addClass("error error-border error-animation"),setTimeout(function(){$("#user-cname").removeClass("error-animation error-border ")},500),!1;t.mob=$("#user-mob").val(),t.mprefix=$("#user-mprefix").val(),t.cid=$("#user-cid").val(),$("#user-unsubscribe").length&&(t.sub="n"===$("#user-unsubscribe").val()&&$('input[name="user-unsubscribe"]:checked').length?"n":"y")}0==e&&$.ajax({url:"/api/user/:id",method:"PUT",dataType:"json",data:JSON.stringify(t),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){},success:function(e,t,i){if(console.log(JSON.stringify(e)),"Success"==e.status){console.log("success");var a="";switch(e.data.user.g){case"m":a="Mr.";break;case"f":a="Ms.";break;case"default":a=""}$("#posts").text(e.data.user.fname[0]),$(".u-name").text(a+" "+e.data.user.fname+" "+e.data.user.lname),$(".edit-name-default").removeClass("hide"),$(".edit-name-input").addClass("hide"),$(".date-pick-input").val(e.data.user.dob),$(".date-pick-input").attr("disabled",!0),$(".success-message").show(),setTimeout(function(){$(".success-message").hide()},5e3)}else console.log("failure")},complete:function(e,t){}})});;
$(document).ready(function(){$(".feedback-container").on("submit",".feedback-form",function(){var e=$("input[name=rating]:checked").val();if(!e)return $(".form-error").html(""),$(".form-error").html("<p>Select rating between 1 to 10.</p>"),!1;if($(".form-error").html(""),$.fn.fmValidate.init(this)){var t=processData($(this).serializeArray());$.ajax({url:"/api/customerFeedback",method:"POST",data:t,contentType:"application/json; charset=UTF-8",cache:!0,processData:!1,beforeSend:function(e){$(".fd-submit").text("SUBMITTING...")},success:function(e,t,i){"Success"===e.status?($(".fd-submit").text("SUBMITTED"),$(".formTitle").addClass("hide"),$(".form-content").addClass("hide"),$(".form-success").removeClass("hide")):($(".fd-submit").text("SUBMIT"),$(".form-error").html(""),$(".form-error").html("<p>"+e.data.error+"</p>"))},error:function(e){console.log("error")}})}return!1})});;
$(".progress-circle-2").hover(function(){$(this).hasClass("green-border")&&($(".triangle-up").hide(),$(".status-desc").hide(),$(this).find(".triangle-up").show(),$(this).find(".status-desc").show())},function(){$(".triangle-up").hide(),$(".status-desc").hide()}),$(".progress-circle").hover(function(){$(this).hasClass("green-border")&&($(".triangle-up").hide(),$(".status-desc").hide(),$(this).find(".triangle-up").show(),$(this).find(".status-desc").show())},function(){$(".triangle-up").hide(),$(".status-desc").hide()});;
$(document).on("click",".clkOrder",function(){$(this).siblings().slideToggle(),$(this).toggleClass("bg-dark"),$(this).toggleClass("selected-border"),$(this).hasClass("selected-border")?($(this).find("select-arrow").addClass("rotate-arrow"),console.log("found it")):$(this).find("select-arrow").removeClass("rotate-arrow")}),$(document).on("click",".view-detail",function(){var e=$(this).data("order-id");console.log("orderId :"+e)});;
function isEmail(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!!t.test(e)}function generateOrderList(e){e.orders.forEach(function(e){orderHistoryList.push({order:e.id,date:e.odate})}),orderHistoryList.sort(function(e,t){return new Date(t.date)-new Date(e.date)}),renderOrderList("")}function renderOrderList(e){var t=orderHistoryList.filter(function(t){return-1!==t.order.toString().indexOf(e.toString())}),i="";t.forEach(function(e){i+='<li data-order = "'+e.order+'">Order No. '+e.order+" placed on "+e.date+"</li>"}),$(".order-number").is(":focus")&&$(".order-dropdown").html(i).addClass("open")}$(document).on("click","#user-login-button",function(){$("#user-menu").trigger("click")}),$(document).on("click","#track-order-button",function(){var e=$(".order-number").val();e?window.location="/trackorder/"+e:($(".track-container").removeClass("mar-bot-40"),$(".track-input-button").addClass("border-color-red"),$(".error-valid-text").removeClass("hide"))}),$("#track-without-login").on("click",function(e){e.preventDefault();var t=!1,i=$(".order-number").val(),a=$(".email-addr").val();return""===i&&(t=!0,$(".order-number").addClass("error error-animation"),setTimeout(function(){$(".order-number").removeClass("error-animation")},300),$(".order-number").next(".error-valid-text").removeClass("hide")),""!=a||isEmail(a)||(t=!0,$(".email-addr").addClass("error error-animation"),setTimeout(function(){$(".email-addr").removeClass("error-animation")},300),$(".email-addr").next(".error-valid-text").removeClass("hide")),t?!1:(NProgress.start(),$("#h-mask").addClass("is-active"),void $.ajax({url:"/api/track-without-login?orderId="+i+"&email="+a,method:"GET",contentType:"application/json; charset=UTF-8"}).done(function(e){'<div class="error"></div>'==e.trim()?$(".invalid-order").removeClass("hide"):($(".order-details").html(e),$("html,body").animate({scrollTop:window.innerHeight-40}),$(".progress-circle").hover(function(){$(this).hasClass("green-border")&&($(".triangle-up").hide(),$(".status-desc").hide(),$(this).find(".triangle-up").show(),$(this).find(".status-desc").show())},function(){$(".triangle-up").hide(),$(".status-desc").hide()}))}).always(function(){NProgress.done(),$("#h-mask").removeClass("is-active")}))}),$(".track-input-button").focusin(function(){$(".track-container").addClass("mar-bot-40"),$(".track-input-button").removeClass("error"),$(".error-valid-text").addClass("hide")});var orderHistoryList=[];"undefined"!=typeof user&&($.ajax({url:"/orderhistoryjson",method:"GET"}).done(function(e){generateOrderList(e)}),$(".order-number").on("input focus",function(e){renderOrderList($(this).val().trim())}),$("body").on("click",function(e){0==$(e.target).parents(".order-input-container").length&&$(".order-dropdown").removeClass("open")}),$("body").on("click",".order-dropdown li",function(e){$(".order-number").val($(this).data("order")),$(".order-dropdown").removeClass("open")}));;