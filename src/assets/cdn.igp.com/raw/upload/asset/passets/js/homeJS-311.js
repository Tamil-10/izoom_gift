"use strict";function loadCards(){if($("#cards-"+selection+recipient+relation).length)console.log("show"),animateCards();else if(selection+recipient+relation==="")console.log("show default"),animateCards();else{console.log("load");var e={};switch(level){case 1:e="gs"===selection?{s:selection,l:0,rc:"any"}:{s:selection};break;case 2:e={s:selection,l:1,rc:recipient,rl:"any"};break;case 3:e={s:selection,l:2,rc:recipient,rl:relation,oc:"any"}}$.ajax({url:"/api/cards",method:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){$(".card-group-wrapper>ul").hide(),$("#cards-loader").show(),$(".card-group-wrapper>#cards-loader>li").hide(),$(".card-group-wrapper>#cards-loader>li").css({"margin-top":"20px"});var t=0;$(".card-group-wrapper>#cards-loader>li").each(function(){var e=$(this);e.css({display:"block",opacity:0}),e.delay(t).animate({"margin-top":"0px",opacity:1}),t+=100})},success:function(e,t,i){generateCardsHTML(e.cards)},complete:function(e,t){$("#cards-loader").hide(),animateCards()}})}}function loadCards_best999(){var e="?url=home/"+encodeURIComponent(window.location.hash.replace("#","")+"&type=1");if($("#tp-"+selection+recipient+relation).length)console.log("show"),animate_tp_edp(!0);else if(selection+recipient+relation==="")console.log("show default"),animate_tp_edp(!0);else{console.log("load");var t={};switch(level){case 1:t={rc:"any",l:"16",off:"0"};break;case 2:t={rc:recipient,rl:"any",l:"16",off:"0"};break;case 3:t={rc:recipient,rl:relation,o:"any",l:"16",off:"0"}}$.ajax({url:"/api/products/bestunder999"+e,method:"POST",dataType:"json",data:JSON.stringify(t),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){$(".tp-group-wrapper>div").hide(),$("#tp-loader").show().resize(),$(".tp-group-wrapper>#tp-loader>div").hide(),$(".tp-group-wrapper>#tp-loader>div").css({"margin-top":"20px"});var t=0;$(".tp-group-wrapper>#tp-loader>div").each(function(){var e=$(this);e.css({display:"block",opacity:0}).resize(),e.delay(t).animate({"margin-top":"0px",opacity:1}),t+=100})},success:function(e,t,i){console.log(e.products),e.products?($("section#tpWrapper").show(),generate_tp_edp_pHTML(e.products,!0)):$("section#tpWrapper").hide()},complete:function(e,t){$("#tp-loader").hide()}})}}function loadCards_editorPick(){var e="?url=home/"+encodeURIComponent(window.location.hash.replace("#","")+"&type=0");if($("#edp-"+selection+recipient+relation).length)console.log("show"),animate_tp_edp(!1);else if(selection+recipient+relation==="")console.log("show default"),animate_tp_edp(!1);else{console.log("load");var t={};switch(level){case 1:t={rc:"any",l:"16",off:"0"};break;case 2:t={rc:recipient,rl:"any",l:"16",off:"0"};break;case 3:t={rc:recipient,rl:relation,o:"any",l:"16",off:"0"}}$.ajax({url:"/api/products/bestsellers"+e,method:"POST",dataType:"json",data:JSON.stringify(t),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){$(".edp-group-wrapper>div").hide(),$("#edp-loader").show().resize(),$(".edp-group-wrapper>#edp-loader>div").hide(),$(".edp-group-wrapper>#edp-loader>div").css({"margin-top":"20px"});var t=0;$(".edp-group-wrapper>#edp-loader>div").each(function(){var e=$(this);e.css({display:"block",opacity:0}).resize(),e.delay(t).animate({"margin-top":"0px",opacity:1}),t+=100})},success:function(e,t,i){console.log(e.products),e.products?($("section#edpWrapper").show(),generate_tp_edp_pHTML(e.products,!1)):$("section#edpWrapper").hide()},complete:function(e,t){$("#edp-loader").hide()}})}}function loadPersonalityCards(){if("k"!==recipient)if($("#pcards-"+selection+recipient+relation).length)console.log("show"),$(".pcards-cont").show(),animatePersonalityCards();else if(selection+recipient+relation==="")console.log("show default"),$(".pcards-cont").show(),animatePersonalityCards();else{console.log("load");var e={};switch(level){case 1:e="gs"===selection?{s:selection,l:0,p:"any",rc:"any"}:{s:selection,p:"any"};break;case 2:e={s:selection,l:1,p:"any",rc:recipient,rl:"any"};break;case 3:e={s:selection,l:2,p:"any",rc:recipient,rl:relation,oc:"any"}}e.n=3,$.ajax({url:"/api/cards",method:"POST",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){$(".pcard-group-wrapper>ul").hide(),$("#pcards-loader").show(),$(".pcard-group-wrapper>#pcards-loader>li").hide(),$(".pcard-group-wrapper>#pcards-loader>li").css({"margin-top":"20px"});var t=0;$(".pcard-group-wrapper>#pcards-loader>li").each(function(){var e=$(this);e.css({display:"block",opacity:0}),e.delay(t).animate({"margin-top":"0px",opacity:1}),t+=100})},success:function(e,t,i){e.cards&&0!==e.cards.length?($(".pcards-cont").show(),generatePersonalityCardsHTML(e.cards)):$(".pcards-cont").hide()},complete:function(e,t){$("#pcards-loader").hide(),animatePersonalityCards()}})}}function generateCardsHTML(e){var t='<ul class="card-group row" id="cards-'+selection+recipient+relation+'" style="display:none;">',i="";for(var n in e)if(0!=e[n].hover.length){var o=e[n].hover;if(i=2==o.length?o[1].hoverUrl:o[2].hoverUrl,o&&o.length>0){if(t+='<li class="col s4"><div class="card z-depth-1 hoverable"><div class="card-image"><img class="img-responsive lazy lazy-card-image redirectItem" alt="'+e[n].title+'"src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAQAAAAe/WZNAAAADklEQVR42mNkgAJGDAYAAFEABCaLYqoAAAAASUVORK5CYII=" data-original="'+cdn.cardsURL+getImageUrl(e[n].img)+'" data-url="'+i+'">',t+='<div class="overlay-shape text-center"><div class="overlay-content row no-margin">\n',2==o.length)t+='<div class="col s4">',t+='<a class="waves-effect waves-red hover-icon" href="/'+o[0].hoverUrl+'">',t+='<div class="icon-wrapper">',t+='<svg viewBox="0 0 2 2" class="s-icon">',t+='<use xlink:href="/svgs/'+o[0].iconCode+'"></use>',t+="</svg></div>",t+="<p >"+o[0].dispName+"</p></a>",t+="</div>",t+='<div class="col s4">&nbsp;</div>',t+='<div class="col s4">',t+='<div class="waves-effect waves-red hover-icon redirectItem" data-url="/'+o[1].hoverUrl+'">',t+='<div class="icon-wrapper hover-icon-wrapper">',t+='<svg viewBox="0 0 2 2" class="s-icon">',t+='<use xlink:href="/svgs/'+o[1].iconCode+'"></use>',t+="</svg></div></div>",t+="<p >"+o[1].dispName+"</p>",t+="</div>";else if(3==o.length)for(var s in o)t+='<div class="col s4">',t+=parseInt(s)===o.length-1?'<div class="waves-effect waves-red hover-icon redirectItem" data-url="/'+o[s].hoverUrl+'">':'<a class="waves-effect waves-red hover-icon" href="/'+o[s].hoverUrl+'">',t+='<div class="icon-wrapper hover-icon-wrapper">',t+='<svg viewBox="0 0 2 2" class="s-icon">',t+='<use xlink:href="/svgs/'+o[s].iconCode+'"></use>',t+="</svg></div>",t+="<p >"+o[s].dispName+"</p>",t+=parseInt(s)===o.length-1?"</div>":"</a>",t+="</div>";t+="</div> <a href=/"+i+'><div class="triangle-left-up"></div></a><a href=/'+i+'><div class="triangle-right-up"></div></a></div></div>',t+="<a href=/"+i+'><div class="card-name-w"><p class="card-name">'+e[n].title+"</p></div></a></a>",t+='<div class="hide int_titl">'+e[n].int_title+"</div></div></li>"}}else t+='<li class="col s4">',t+='<a href="/'+e[n].url+'">',t+='<div class="card z-depth-1 hoverable">',t+='<div class="card-image">',t+='<img class="img-responsive card-image-p lazy lazy-card-image" alt="'+e[n].title+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAQAAAAe/WZNAAAADklEQVR42mNkgAJGDAYAAFEABCaLYqoAAAAASUVORK5CYII=" data-original="'+cdn.cardsURL+getImageUrl(e[n].img)+'">',t+="</div>",t+='<div class="card-name-w"><p class="card-name">'+e[n].title+"</p></div>",t+='<div class="hide int_titl">'+e[n].int_title+"</div>",t+="</div>",t+="</a></li>";t+="</ul>",$(".card-group-wrapper").append(t),$("img.lazy-card-image").lazyload({effect:"fadeIn",skip_invisible:!1,threshold:50})}function generate_tp_edp_pHTML(e,t){var i,n=new Date,o=n.getTimezoneOffset(),s=330,a=new Date(n.getTime()+6e4*(s+o)),r=a.getHours();i=t?'<div class="trending-products-carousel row no-margin" id="tp-'+selection+recipient+relation+'" style="display:none;">':'<div class="editors-picks-carousel row no-margin" id="edp-'+selection+recipient+relation+'" style="display:none;">',e.forEach(function(e){i+='<div class="product-grid-item col s3" data-pid="'+e.id+'" data-url="/'+e.url+'">',i+='<div class="product-item z-depth-1 hoverable">',i+='<div class="image-holder">',i+='<a href="'+e.url+'"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original="'+cdn.productsURL+cdn.productsURLTransformationM+cdn.productsURLFolder1+e.image+'" class="img-responsive product-image lazy lazy-product-image">',i+='<div class="row no-margin ">',i+='<div class="col s12 no-padding">',i+='<div class="product-name-w">',i+='<p class="product-name">'+e.dname+"</p>",i+="</div></div></div>",i+="</a>",i+=e.pers?'<div class="pdp-label bottom-left">Personalizable</div>':"",i+=e.eggless?'<div class="pdp-label bottom-left">Eggless also</div>':"",5==$("body").data("stid")&&(i+='<div class="sl-star-wrapper"><div class="sl-star" data-pid="'+e.id+'" data-in-slist="0"><div class="icon-wrapper sl-icon-star">',i+='<svg viewBox="0 0 2 2" class=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/svgs/main.svg#shape-shortlist"></use></svg>',i+="</div></div></div>"),e.dt.hasOwnProperty("Fixeddate")&&(i+=r>=sameDayLimit||e.delivery_days>0?'<div class="pdp-label top-right">Next Day Delivery</div>':'<div class="pdp-label top-right">Same Day Delivery</div>'),i+="</div>",i+='<div class="product-info">',0===e.price.dprice_inr?(i+='<div class="row no-margin">',i+='<div class="col s8 no-padding">',i+='<p class="product-price"><span class="number">Rs. '+e.price.mrp_inr+"</span> </p>",i+="</div>",i+='<div class="col s4 no-padding"><p class="offer-p"></p></div>',i+="</div>"):(i+='<div class="row no-margin">',i+='<div class="col s8 no-padding">',i+='<p class="product-price"><span class="number offer">Rs. '+e.price.dprice_inr+'</span> <span class="number">'+e.price.mrp_inr+"</span> </p>",i+="</div>",i+='<div class="col s4 no-padding">',i+='<p class="offer-p"><span class="offer-label number">'+e.discount+" OFF</span></p>",i+="</div></div>"),i+="</div>",e.dt.hasOwnProperty("Fixeddate")?r>=sameDayLimit||e.delivery_days>0?(i+='<div class="row variant-container no-margin">',i+='<div class="col s12 no-padding">',i+='<p class="shipping-text">Can be delivered tomorrow.</p>',i+="</div></div>"):(i+='<div class="row variant-container no-margin">',i+='<div class="col s12 no-padding">',i+='<p class="shipping-text">Get it today! Order before 4pm IST</p>',i+="</div></div>"):(i+='<div class="row variant-container no-margin">',i+='<div class="col s12 no-padding">',e.flag_fs&&(i+='<p class="shipping-text invisible">Free Shipping</p>'),i+="</div></div>"),i+="</div></div>"}),i+="</div>",t?($(".tp-group-wrapper").append(i),animate_tp_edp(!0),$(".tp-group-wrapper #tp-"+selection+recipient+relation+" img.lazy-product-image").lazyload({effect:"fadeIn",skip_invisible:!1,threshold:50,container:$(".slick-track")}),$("#tp-"+selection+recipient+relation).slick({infinite:!0,slidesToShow:4,slidesToScroll:4,accessibility:!1,dots:!0,arrows:!0}).resize()):($(".edp-group-wrapper").append(i),animate_tp_edp(!1),$(".edp-group-wrapper #edp-"+selection+recipient+relation+" img.lazy-product-image").lazyload({threshold:50,skip_invisible:!1,effect:"fadeIn",container:$(".slick-track")}),$("#edp-"+selection+recipient+relation).slick({infinite:!0,slidesToShow:4,slidesToScroll:4,accessibility:!1,dots:!0,arrows:!0}).resize()),$("img.lazy-product-image").lazyload({effect:"fadeIn",skip_invisible:!1,threshold:50,container:$(".slick-track")})}function generatePersonalityCardsHTML(e){var t='<ul class="card-group row" id="pcards-'+selection+recipient+relation+'" style="display:none;">';for(var i in e)t+='<li class="col s4" style="display: block; margin-top: 0px; opacity: 1;"><div class="p-card z-depth-1"><img class="img-responsive p-card-image lazy lazy-p-card-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAQAAAAe/WZNAAAADklEQVR42mNkgAJGDAYAAFEABCaLYqoAAAAASUVORK5CYII=" data-original="'+cdn.cardsURL+getImageUrl(e[i].img)+'" src="'+cdn.cardsURL+getImageUrl(e[i].img)+'" style="padding-bottom: 0px;"><div class="p-card-content"><h3 class="p-title">'+e[i].title+'</h3><p class="p-desc">'+e[i].sdesc+'</p><a class="p-btn pull-right" href="'+e[i].url+'">Shop Now</a><div class="clear"></div></div></div></li>';t+="</ul>",$(".pcard-group-wrapper").append(t),$("img.lazy-p-card-image").lazyload({effect:"fadeIn",skip_invisible:!1,threshold:50})}function animateCards(){var e=selection+recipient+relation;$(".card-group-wrapper>ul").hide(),e=""===e?"cards-default":"cards-"+e;var t=$(".card-group-wrapper>#"+e);if(t.show(),"undefined"!=typeof Storage)if("cards-default"!==e){var i={};i[selection+recipient+relation]=t[0]?t[0].outerHTML:"",localStorage.setItem("cards",JSON.stringify(i))}else localStorage.removeItem("cards");$(".card-group-wrapper>#"+e+">li").hide(),$(".card-group-wrapper>#"+e+">li").css({"margin-top":"20px"});var n=0;$(".card-group-wrapper>#"+e+">li").each(function(){var e=$(this);e.css({display:"block",opacity:0}),e.delay(n).animate({"margin-top":"0px",opacity:1}),n+=100})}function animate_tp_edp(e){var t,i=selection+recipient+relation;t=e?"tp":"edp",$("."+t+"-group-wrapper>div").hide(),i=""===i?t+"-default":t+"-"+i;var n=$("."+t+"-group-wrapper>#"+i);if(n.show(),"undefined"!=typeof Storage)if(i!==t+"-default"){var o={};o[selection+recipient+relation]=n[0]?n[0].outerHTML:"",localStorage.setItem(t,JSON.stringify(o))}else localStorage.removeItem(t);$("."+t+"-group-wrapper>#"+i+"div").hide(),$("."+t+"-group-wrapper>#"+i+">div").css({"margin-top":"20px"});var s=0;$("."+t+"-group-wrapper>#"+i+">div").each(function(){var e=$(this);e.css({display:"block",opacity:0}),e.delay(s).animate({"margin-top":"0px",opacity:1}),s+=100})}function animatePersonalityCards(){var e=selection+recipient+relation;$(".pcard-group-wrapper>ul").hide(),e=""===e?"pcards-default":"pcards-"+e;var t=$(".pcard-group-wrapper>#"+e);if(t.show(),"undefined"!=typeof Storage)if("pcards-default"!==e){var i={};i[recipient]=t[0]?t[0].outerHTML:"",localStorage.setItem("pcards",JSON.stringify(i))}else localStorage.removeItem("pcards");$(".pcard-group-wrapper>#"+e+">li").hide(),$(".pcard-group-wrapper>#"+e+">li").css({"margin-top":"20px"});var n=0;$(".pcard-group-wrapper>#"+e+">li").each(function(){var e=$(this);e.css({display:"block",opacity:0}),e.delay(n).animate({"margin-top":"0px",opacity:1}),n+=100})}function generateMenuHTML(e,t,i,n,o){e.removeAttr("data-options"),e.removeData("options");var s,a='<div style="display: none;"><ul id="'+t+i+'" class="selection-inner" ';n.length>8&&(s=!0),s&&(a+='style="height: 50%;"'),a+=">";var r=Math.ceil(n.length/2),l=s?100/r+"%":100/n.length+"%";for(var c in n)n.length<3&&(l="15%"),a+='<li class="',n[c].hasOwnProperty("occasions")?(a+='clk" ',a+="data-options='"+JSON.stringify(n[c].occasions)+"' data-for=\""+n[c].text+'" data-select="OCCASION" data-level="'+(o+1)+'" data-selectioncode="'+n[c].code+'" data-width="'+l+'" style="width:'+l+'" id="'+e.attr("id")+"-"+n[c].code+'"> ',a+='<div style="display: block;margin : 1em auto 0 auto;" class="icon-wrapper rec-i-wrapper"><svg viewBox="0 0 2 2" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="svgs/'+n[c].icon+'"></use></svg></div><br/><p style="display: block;margin : 0;" class="text"><span>'+n[c].text+"</span></p>"):(a+='redirect" data-selectioncode="'+n[c].code+'" data-width="'+l+'" data-url="/'+n[c].url+'" style="width:'+l+'">',a+='<a href="/'+n[c].url+'"><div style="display: block;margin : 1em auto 0 auto;" class="icon-wrapper rec-i-wrapper"><svg viewBox="0 0 2 2" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="svgs/'+n[c].icon+'"></use></svg></div><br/><p style="display: block;margin : 0;" class="text"><span>'+n[c].text+"</span></p></a>"),a+="</li>",s&&parseInt(c)+1===r;s&&n.length%2&&(a+='<li style="width: '+l+'"></li>'),a+="</ul>",s&&(a+='<ul class="selection-inner" style="height: 50%;"></ul>'),a+="</div>",e.append(a)}function getDefaultPersCardData(e){return"830"==$("body").data("stid")?!1:void $.ajax({url:"/h/homeTemplate",method:"POST",async:!0,cache:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e){console.log("before Send")},success:function(t,i,n){function o(){var e=$(".icon-wrapper.cat-icon-wrapper");e.each(function(){var e=$(this).data("href");e&&$(this).html('<svg viewBox="0 0 2 2" class="s-icon cat-icon"><use xlink:href = "'+e+'"></use></svg>')})}e(t),window.windowLoaded?o():$(window).on("load",function(){o()})},error:function(e){console.log("error : "+JSON.stringify(e))}})}function getGiftSomeoneDataTemplate(e){return console.log("inside giftsoe js"),"830"==$("body").data("stid")?!1:void $.ajax({url:"/h/giftSomeoneTemplate",method:"POST",async:!0,cache:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e){console.log("before Send")},success:function(t,i,n){e(t)},error:function(e){console.log("error : "+JSON.stringify(e))}})}var selection="",recipient="",relation="",occasion="",level=0,oldHash="",setHashFlag=0,triggerClick=0;setTimeout(function(){getGiftSomeoneDataTemplate(function(e){var t=window.location.hash;console.log("loc: "+t),""!=t&&"#search"!=t||$(".selected-panel").after(e)})},10),$(window).on("load",function(){$("html,body").trigger("scroll")}),function(e){if(e("#selection-panel").length){e(window).scroll(function(){0!==e(".f-t-alert.sbiomp").length&&(e(window).scrollTop()>50?(e("#absolute-header").hide(),e(".morphsearch").hide()):(e("#absolute-header").show(),e(".morphsearch").show())),e("#selection-panel").isOnScreen()?(e("#header").removeClass("sticky"),e("#site-wrapper").removeClass("sticky-margin"),e("#header").removeClass("show-sticky"),e("#gc-mm-wrapper").removeClass("fixed"),e(".header-container").removeClass("sticky-container")):(e("#header").addClass("sticky"),e("#site-wrapper").addClass("sticky-margin"),e("#header").addClass("show-sticky"),e("#gc-mm-wrapper").addClass("fixed"),e(".header-container").addClass("sticky-container"))})}e.fn.isOnScreen=function(){var t=e(window),i={top:t.scrollTop(),left:t.scrollLeft()};i.right=i.left+t.width(),i.bottom=i.top+t.height();var n=this.offset();return n.right=n.left+this.outerWidth(),n.bottom=n.top+this.outerHeight(),!(i.right<n.left||i.left>n.right||i.bottom<n.top||i.top>n.bottom)}}(jQuery),$(document).ready(function(e){function t(){$(".trending-products-carousel:last").slick({infinite:!0,slidesToShow:4,slidesToScroll:4,accessibility:!1,dots:!0,arrows:!0}).resize()}function i(){$(".festival-container").slideDown(300,function(){$(".festival-container").addClass("active"),l=!0})}function n(){$(".festival-container").slideUp(300),$(".festival-container").removeClass("active"),l=!1}function o(){var e="";""!==selection&&(e+=selection),""!==recipient&&(e+="-"+recipient),""!==relation&&(e+="-"+relation),"undefined"!=typeof Storage&&setTimeout(function(){if(""!==e){var t={};t[selection+recipient+relation]=$("#selection-panel-list").html(),localStorage.setItem("spanel",JSON.stringify(t))}else localStorage.removeItem("spanel")},600),oldHash=e,0===triggerClick?(setHashFlag=1,window.location.hash=e):triggerClick=0}$(".selection-panel-item").hover(function(){$(".onboard-container").hide()}),$(".tooltip").darkTooltip({size:"small"});for(var s=$(".banner-wrapper").data("bnr"),a="",r=1;r<s.length;r++)a+='<div><a target="_blank" href="'+s[r].url+'"><div  class="banner-overlay"></div><img class="img-responsive banner-image" src="'+cdn.bannersURL+s[r].image+'"/></a></div>';$(".home-banner-carousel").append(a),$(".home-banner-carousel").slick({infinite:!0,lazyLoad:"progressive",slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:6e3,accessibility:!1,dots:!0,arrows:!1}).show(),setTimeout(function(){getDefaultPersCardData(function(e){$("#home-doc-load").html(e),t()})},10),$(".story-carousel").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,accessibility:!1,dots:!0,arrows:!1}),$(".listing-page-carousel").slick({slidesToShow:3,slidesToScroll:3,arrows:!1,centerMode:!0,prevArrow:'<button type="button" class="arrow-left"><</button>',nextArrow:'<button type="button" class="arrow-right">></button>',focusOnSelect:!1,appendArrows:".carousel-w",centerPadding:"200px",accessibility:!1});var l=!1;$(".festival-click").click(function(){l?n():i()}),$(document).on("click",function(e){$(e.target).closest(".festival-container").length||l&&n()}),$("#selection-panel-list").on("click","li.close.clk",function(){0!==$(".f-t-alert.sbiomp").length&&($(".gc-mm-wrapper").removeClass("sbi-margin"),$(".header-container").removeClass("sbi-margin"),$(".f-t-alert.sbiomp").hide()),$(this).addClass("open").removeClass("close"),$(this).velocity({width:"100%"},150),$(".dark-tooltip").remove(),$(".banner-wrapper").hide(),$("html,body").animate({scrollTop:0}),$("#selection-panel-list > li.close").toggle(),$(this).find(".selection-icon").toggle();var e=$(this).find(".selection-menu>.selection-inner.main>li");e.css({width:100/e.length+"%"}),e.attr("data-width",100/e.length+"%"),$(this).find(".selection-menu").toggle(),selection=$(this).data("selectioncode"),level=1,$(this).data("focus")&&$("#input-location").focus(),o(),loadCards(),loadCards_best999(),loadCards_editorPick(),loadPersonalityCards()}),$("#selection-panel-list").on("click",".selection-inner li.clk",function(){var e=$(this);e.parent().css({height:"100%"}),e.animate({width:"100%"}),e.parent().siblings("ul").hide(),e.removeClass("clk");var t=e.closest(".selection-inner").attr("id");t?t+="_":t="";var i=e.data("for").match(/\b(\w){2}/g).join(""),n=e.data("level");e.closest(".selection-inner.main").next(".back-button").attr("data-level",n).attr("data-back_id",t+i);var s=e.closest(".selection-inner.main").prev(".selected-panel");s.find(".for").html("for<br>"+e.data("for")),s.find(".select").html("<br>"+e.data("select"));var a=e.data("options");switch(a&&a.length>0&&generateMenuHTML(e,t,i,a,n),e.children().toggle(),e.siblings().toggle(),n){case 1:recipient=e.data("selectioncode"),level=2;break;case 2:relation=e.data("selectioncode"),level=3}o(),loadCards(),loadCards_best999(),loadCards_editorPick(),loadPersonalityCards(),$("html,body").animate({scrollTop:0},0)}),$("#selection-panel-list").on("click",".back-button",function(){var e=$(this),t=e.attr("data-level");if(t=parseInt(t),0===t){$(".image-banner-text").outerHeight();$(".site-wrapper").removeClass("m-top"),$(".selection-panel-wrapper").removeClass("collapse"),$(".banner-wrapper").show(),$(".tooltip").darkTooltip({animation:"flipIn",gravity:"south",size:"small"}),$(".editors-picks-carousel#edp-default").slick({infinite:!0,slidesToShow:6,slidesToScroll:4,accessibility:!1,dots:!0,arrows:!0,draggable:!1}).resize(),$(".trending-products-carousel#tp-default").slick({infinite:!0,slidesToShow:6,slidesToScroll:4,accessibility:!1,dots:!0,arrows:!0,draggable:!1}).resize(),$("#sticky-header").addClass("hide-menu"),$("#absolute-header").removeClass("hide-menu"),$(".header-container").removeClass("dark-menu"),e.closest(".selection-menu").toggle(),e.parent().prev(".selection-icon").toggle(),$("#selection-panel-list > li.close").toggle(),e.closest("li.open").addClass("close").removeClass("open").animate({width:"20%"})}else{var i,n,s=e.attr("data-back_id"),a=s.split("_");1===a.length?(e.attr("data-back_id",""),i="Someone",n="A <br> RECIPIENT"):(a.pop(),e.attr("data-back_id",a.join("_")),i="for <br>"+$("#"+a.join("_")).closest("li").data("for"),n="<br>"+$("#"+a.join("_")).closest("li").data("select")),$("#"+a.join("_")).show().siblings("ul").show(),e.closest(".selection-menu").find(".for").html(i),e.closest(".selection-menu").find(".select").html(n),$("#"+a.join("_")).siblings().length&&($("#"+a.join("_")).css({height:"50%"}),$("#"+a.join("_")).siblings().css({height:"50%"})),$("#"+s).closest("li").children().toggle(),e.attr("data-level",t-1);var r=$("#"+s).closest("li");r.addClass("clk").animate({width:r.data("width")},200,function(){$("#"+s).closest("li").siblings().toggle()})}switch(t){case 0:selection="";break;case 1:recipient="";break;case 2:relation=""}o(),loadCards(),loadCards_best999(),loadCards_editorPick(),loadPersonalityCards(),$("html,body").animate({scrollTop:0},0)}),$(window).on("hashchange",function(e){var t=(JSON.parse(getLocalStorageValue("searchhistoryurl")),-1!==ignoreHash.indexOf(window.location.hash)||-1!==ignoreHash.indexOf(oldURL));if(!t){var i=window.location.hash.substring(1);if(""!==i?($("#more-about-igp").hide(),$("#testimonials").hide()):($("#more-about-igp").show(),$("#testimonials").show()),oldHash!==i){var n=oldHash.split("-"),o=window.location.hash.substring(1).split("-");if(triggerClick=1,1===n.length&&""===n[0]&&n.pop(),1===o.length&&""===o[0]&&o.pop(),o.length>n.length)for(var s=n.length;s<o.length;s++){var a=o.slice(0,s+1).join("-");$("#"+a).trigger("click")}else if(o.length<n.length)for(var r=n.length-o.length,s=0;r>s;s++)$(".back-button").trigger("click")}}}),$(".s-panel-icon").attr("class","s-icon s-panel-icon animate"),setTimeout(function(){$(".s-panel-icon").attr("class","s-icon s-panel-icon")},4e3),$(window).scroll(function(){var e=$(window).scrollTop();e>=0&&(e/=$(".selection-panel-wrapper").offset().top+300,$(".banner-overlay").css("opacity",e),$(".home-banner-carousel").css("transform","scale("+(e+1)+")"))})}),$(document).ready(function(){if("undefined"!=typeof Storage){var e=window.location.hash.substring(1).split("-"),t="",i="",n="";if(t=e[0]?e[0]:"",i=e[1]?e[1]:"",n=e[2]?e[2]:"",t+i+n!==""?(0!==$(".f-t-alert.sbiomp").length&&($(".header-container").removeClass("sticky-header alert-possible sbiompCont"),$(".f-t-alert.sbiomp").hide()),$("#more-about-igp").hide(),$("#testimonials").hide()):($("#more-about-igp").show(),$("#testimonials").show()),t+i+n!==""&&"gs"===t){var o=localStorage.getItem("spanel");$("#darktooltip-gs").remove(),o&&(o=JSON.parse(o),o.hasOwnProperty(t+i+n)&&(selection=t,recipient=i,relation=n,oldHash=window.location.hash.substring(1),""!==selection&&(level=1),""!==recipient&&(level=2),""!==relation&&(level=3),$("#selection-panel-list").html(o[t+i+n]),$(".banner-wrapper").hide(),$(".dark-tooltip").remove(),$("html,body").animate({scrollTop:0})));var s=localStorage.getItem("cards");s&&(s=JSON.parse(s),s.hasOwnProperty(t+i+n)&&""!=s[t+i+n]&&($(".card-group-wrapper ul").hide(),$(".card-group-wrapper").append(s[t+i+n]),$("img.lazy-card-image").lazyload({effect:"fadeIn",skip_invisible:!1,threshold:50})));var a=localStorage.getItem("pcards");a&&(a=JSON.parse(a),a.hasOwnProperty(i)&&""!=a[i]&&($(".pcard-group-wrapper ul").hide(),$(".pcard-group-wrapper").append(a[i]),$("img.lazy-p-card-image").lazyload({effect:"fadeIn",skip_invisible:!1,threshold:50})));var r=localStorage.getItem("tp");if(r&&(r=JSON.parse(r),r.hasOwnProperty(t+i+n)&&""!=r[t+i+n])){$(".tp-group-wrapper>div").hide();var l=$(".tp-group-wrapper");l.addClass("invisible"),l.append(r[t+i+n]),l.find("#tp-loader").show(),l.find(".trending-products-carousel:last").addClass("hide"),l.removeClass("invisible"),$(".tp-group-wrapper #tp-"+selection+recipient+relation+" img.lazy-product-image").lazyload({effect:"fadeIn",skip_invisible:!1,threshold:50,container:$(".slick-track")})}var c=localStorage.getItem("edp");if(c&&(c=JSON.parse(c),c.hasOwnProperty(t+i+n)&&""!=c[t+i+n])){$(".edp-group-wrapper>div").hide();var d=$(".edp-group-wrapper");d.addClass("invisible"),d.append(c[t+i+n]),d.find("#edp-loader").show(),d.find(".editors-picks-carousel:last").addClass("hide"),d.removeClass("invisible"),$(".edp-group-wrapper #edp-"+selection+recipient+relation+" img.lazy-product-image").lazyload({effect:"fadeIn",skip_invisible:!1,threshold:50,container:$(".slick-track")})}}else localStorage.removeItem("spanel"),localStorage.removeItem("cards"),localStorage.removeItem("pcards"),localStorage.removeItem("edp"),localStorage.removeItem("tp")}});;