function countryCodeCheck(e,t,i){$.ajax({url:"/c/country?country_id="+e+"&country_name="+t,method:"PUT",contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){$("#cart-overlay").addClass("show")},success:function(e,t,o){i(e)},error:function(e){console.log("error")}})}function init(){disableForm("#b_addr_form")}function handleDisabledTab(e){var t=e;$(".c-tab").removeClass("active");var i=$(t).attr("id"),o="#"+i+"_form";$(o).hasClass("frm-disabled")?enableForm(o):disableForm(o)}function disableForm(e){$(e+" input").prop("disabled",!0),$(e).addClass("frm-disabled")}function enableForm(e){$(e+" input").removeAttr("disabled"),$(e).removeClass("frm-disabled")}function formateDate(e){if("0"===e||0===e)return e;var t=e.split("-"),i=t[1]+" "+t[0]+", "+t[2],o=new Date(i),e=o.getDate();10>e&&(e="0"+e),e=e.toString();var n=o.getFullYear().toString(),s=o.getMonth()+1;10>s&&(s="0"+s),s=s.toString();var a=n+""+s+e;return a}function getAddOnData(e){return e(!1)}function buildCartItemsList(e){var t="";$("#i-count").text(e.icnt);for(var i in e.plist){if(e.country){var o,n=e.country;for(var s in countriesHash)countriesHash[s]==n&&(o=s)}if(e.plist[i].error)t+='<div class="row c-item flex-row error" data-id="'+e.plist[i].p.id+'">',t+='<form id="product-'+e.plist[i].p.id+'" class="cart-item-form"> ',t+='<input type="hidden" name="pid" value="'+e.plist[i].p.id+'" />',t+='<input type="hidden" name="ptype" value="'+e.plist[i].ptype+'" />',t+='<input type="hidden" name="gbox" value="'+e.plist[i].gbox+'" />',t+='<input type="hidden" id="qty-'+e.plist[i].p.id+'" name="qty" value="'+e.plist[i].qty+'" />',t+='<input type="hidden" name="stype" value="'+e.plist[i].stypeid+'" />',t+='<input type="hidden" name="pin" value="'+e.pin+'" />',t+='<input type="hidden" name="stime" value="'+e.plist[i].stime+'" />',t+='<input type="hidden" name="sdate" value="'+e.plist[i].sdate+'" />',t+='<input type="hidden" name="scity" value="'+e.plist[i].scity+'" />',t+='<input type="hidden" name="attr" value="'+JSON.stringify(e.plist[i].attr)+'" />',t+='<input type="hidden" name="scountry" value="'+e.country+'"/>',t+="</form>",t+='<div class="col s1 no-padding">',t+='<img src="'+cdn.productsURL+cdn.productsURLTransformationTH+cdn.productsURLFolder1+e.plist[i].p.image+'" class="img-responsive c-item-image" onError="this.onerror=null;this.src=\'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\';" />',t+="</div>",t+='<div class="col s5">',t+='<p class="c-item-name ">'+e.plist[i].p.name+"</p>",t+=1==e.plist[i].errtype?'<p class=" c-item-price">The date you selected previously has expired. Please select a new date to continue.</p>':2==e.plist[i].errtype?'<p class=" c-item-price">Sorry, we do not have enough quantity in stock to fulfil your order.</p>':3==e.plist[i].errtype?'<p class=" c-item-price">Add-ons can\'t be ordered without the original product.</p>':'<p class=" c-item-price">This item is not deliverable to the selected location.</p>',t+='<p class=" c-item-addon c-item-addon-delete-mess del-c-item">',t+='<span class="del-item" data-pid="'+e.plist[i].p.id+'">Remove from cart</span>',t+="</p></div>",t+='<div class="col s7">&nbsp;</div>',t+='<span class="close-menu-s number del-c-item" data-pid="'+e.plist[i].p.id+'"><div class="icon-wrapper"><svg viewBox="0 0 2 2"><use xlink:href="/svgs/main.svg#shape-close"></use></svg></div></span>',t+='<div class="c-item-overlay" id="c-item-overlay-'+e.plist[i].p.id+'">',t+='<div class="c-o-content">',t+="<h5>Are you sure you want to remove the item from cart?</h5>",t+='<p class="row c-actions">',t+='<span class="col s4">&nbsp;</span>',t+='<span class="col s2"><a class="cancel" id="cancel-'+e.plist[i].p.id+'" data-pid="'+e.plist[i].p.id+'">Cancel</a></span>',t+='<span class="col s2"><a class="remove-c" id="remove-'+e.plist[i].p.id+'" data-pid="'+e.plist[i].p.id+'">Remove</a></span>',t+='<span class="col s4">&nbsp;</span>',t+="</p>",t+="</div></div></div>";else{t+='<div class="row c-item flex-row" data-id="'+e.plist[i].p.id+'">',t+='<form id="product-'+e.plist[i].p.id+'" class="cart-item-form"> ',t+='<input type="hidden" name="pid" value="'+e.plist[i].p.id+'" />',t+='<input type="hidden" name="ptype" value="'+e.plist[i].ptype+'" />',t+='<input type="hidden" name="gbox" value="'+e.plist[i].gbox+'" />',t+='<input type="hidden" id="qty-'+e.plist[i].p.id+'" name="qty" value="'+e.plist[i].qty+'" />',t+='<input type="hidden" name="stype" value="'+e.plist[i].stypeid+'" />',t+='<input type="hidden" name="pin" value="'+e.pin+'" />',t+='<input type="hidden" name="stime" value="'+e.plist[i].stime+'" />',t+='<input type="hidden" name="sdate" value="'+e.plist[i].sdate+'" />',t+='<input type="hidden" name="scity" value="'+e.plist[i].scity+'" />',t+='<input type="hidden" name="attr" value=\''+JSON.stringify(e.plist[i].attr)+"'  />",t+='<input type="hidden" name="scountry" value="'+e.country+'"/>',t+="</form>",t+='<div class="col s1 no-padding">',t+='<img src="'+cdn.productsURL+cdn.productsURLTransformationTH+cdn.productsURLFolder1+e.plist[i].p.image+'" class="img-responsive c-item-image" onError="this.onerror=null;this.src=\'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\';" />',t+="</div>",t+='<div class="col s4">',t+='<p class="c-item-name ">'+e.plist[i].p.name+"</p>",t+='<p class=" c-item-price"><span class="number">'+getCartPagePrice(e.plist[i].p,"p-mrp",currency)+"</span> /- </p>",e.plist[i].p.pers&&(t+='<p class="c-item-persflag">Personalized</p>'),e.plist[i].p.gbox&&(t+='<p class="c-item-addon">',t+='<input type="checkbox" id="add-box-'+e.plist[i].p.id+"-"+JSON.stringify(e.plist[i].p.attr)+'" class="g-box  filled-in add-box" data-pid="'+e.plist[i].p.name+'"',t+=1==e.plist[i].gbox?"checked":" ",t+="/>",t+='<label for="add-box-'+e.plist[i].p.id+"-"+JSON.stringify(e.plist[i].p.attr)+'">Send this in a gift box (',t+="USD"==currency?currencyConfig[currency]+"3.00":currencyConfig[currency]+" 199",t+=")</label>",t+="</p>"),t+="</div>",t+='<div class="col s2 text-center flex-column relative">',t+='<div class="c-item-qty v-center ">',t+='<p class="text-center">',t+='<span class="symbol des-quantity" data-pid="'+e.plist[i].p.id+'" id="des-quantity-'+e.plist[i].p.id+'">-</span>',t+='<span class="value">',t+='<input class="qty number c-item-qty-val" id="c-item-qty-'+e.plist[i].p.id+'" data-qty="'+e.plist[i].qty+'" data-pid="'+e.plist[i].p.id+'" type="text" pattern="d*" value="'+e.plist[i].qty+'" />',t+="</span>",t+='<span class="symbol inc-quantity" data-pid="'+e.plist[i].p.id+'" id="inc-quantity-'+e.plist[i].p.id+'">+</span><br/>',t+='<span id="c-item-qty-error-'+e.plist[i].p.id+'" class="c-item-qty-error">Max. quantity is 10</span>',t+="</p></div>",t+='<div class=" v-bottom"><a class="del-c-item" data-pid="'+e.plist[i].p.id+'" href="javascript:void(0)">Remove</a></div>',t+="</div>",t+='<div class="col s3 text-center flex-column relative">',t+='<div class="c-item-delivery v-center ">',t+='<p class="c-item-d-type">',t+=e.plist[i].stype,t+='<span class="number ">',"1"==e.plist[i].stype?(0==e.pin&&99!=e.country&&(t+=""),6!=e.pin.length&&99!=e.country||(t+="- FREE")):t+=0==e.plist[i].scharge?"- FREE":"- "+getCartPagePrice(e.plist[i],"scharge",currency),t+='</span><span class="hover-tooltip">'+deliveryTypeText(e.plist[i].stypeid,e.plist[i].stype)+"</span></p>";var a="";e.plist[i].stime&&(a=" between "+e.plist[i].stime),parseInt(e.plist[i].sdate)&&(t+='<p class="c-item-d-pin">',t+=1==e.plist[i].p.flagFdd?"":"Tentatively ",t+='on <span class="number">'+e.plist[i].sdate+a+"</span></p>"),e.country&&99!=e.country?t+='<p class="c-item-d-pin">at '+o+"</p>":0!=e.pin&&(t+='<p class="c-item-d-pin">at pincode - <span class="number">'+e.pin+"</span></p>"),t+="</div></div>",t+='<div class="col s3 text-center flex-column relative">',t+='<div class="c-item-s-total v-center ">',t+='<p class="c-item-d-type">Subtotal: <span class="inr number s-total-val" id="s-total-val-'+e.plist[i].p.id+'">'+getCartPagePrice(e.plist[i],"stotal",currency)+"</span>",t+='<span class="hover-tooltip"><a href="javascript:void(0)" data-tooltip="<p><span>Price :</span><span>'+getCartPagePrice(e.plist[i].p,"p-mrp",currency)+"&#215; <span class=info-window-quantity>"+e.plist[i].qty+"</span></span></p>",0!=e.plist[i].gboxprc&&(t+="<p><span>GiftBox :</span><span>",t+="USD"==currency?currencyConfig[currency]+"3.00":currencyConfig[currency]+" 199",t+="</span></p>"),0!=e.plist[i].ppheral&&(t+="<p><span>Peripheral :</span><span>"+getCartPagePrice(e.plist[i],"ppl",currency)+"</span></p>"),t+="<p><span>Shipping Charges may apply<br/>during checkout</span></p>",t+='</span></p>">(?)</a></span></p>',t+="</div></div>",t+='<span class="close-menu-s number del-c-item" data-pid="'+e.plist[i].p.id+'"><div class="icon-wrapper"><svg viewBox="0 0 2 2"><use xlink:href="/svgs/main.svg#shape-close"></use></svg></div></span>',t+='<div class="c-item-overlay" id="c-item-overlay-'+e.plist[i].p.id+'">',t+='<div class="c-o-content">',t+="<h5>Are you sure you want to remove the item from cart?</h5>",t+='<p class="row c-actions">',t+='<span class="col s4">&nbsp;</span>',t+='<span class="col s2"><a class="cancel" id="cancel-'+e.plist[i].p.id+'" data-pid="'+e.plist[i].p.id+'">Cancel</a></span>',t+='<span class="col s2"><a class="remove-c" id="remove-'+e.plist[i].p.id+'" data-pid="'+e.plist[i].p.id+'">Remove</a></span>',t+='<span class="col s4">&nbsp;</span>',t+="</p></div></div>",t+='<div class="c-item-u-overlay" id="c-item-u-overlay-'+e.plist[i].p.id+'"></div>',t+="</div>"}}t+='<div class="cart-overlay" id="cart-overlay"></div>',t+='<div class="row total-cart-value no-margin">Total Payable Amount: <span></span></div>',$(".c-scroll-container").html(t),$("#cart-total-val").text(getCartPagePrice(e,"total",currency)),$(".total-cart-value span").text(getCartPagePrice(e,"total",currency))}function resetCartPage(){var e="";e+='<div class="cart-container empty-cart">',e+='<div class="row full-width">',e+='<div class="col s12 text-center">',e+='<div class="icon-wrapper selection-icon-wrapper e-cart-icon">',e+='<svg viewBox="0 0 2 2" class="s-icon">',e+='<use xlink:href="svgs/main.svg#shape-e-cart"></use>',e+="</svg></div>",e+='<h5 class="u-case">Cart is Empty</h5>',e+="</div></div>",e+='<div class="row full-width">',e+='<div class="col s3">&nbsp;</div>',e+='<div class="col s6 text-center">',e+='<a class="c-btn-po  u-case waves-effect" href="/">Continue Shopping</a>',e+="</div>",e+='<div class="col s3">&nbsp;</div>',e+="</div></div>",$("#site-wrapper").html(e)}function deliveryTypeText(e,t){var i="";switch(e){case"1":i="<p>Free shipping for deliveries within India. International courier charges may apply during checkout for International deliveries. T&C apply.</p>";break;case"2":i="<p>Delivery will be made anytime within the selected time slot. Charges specific to delivery area. T&C apply.</p>";break;case"3":i="<p>Order before 4 PM (IST) to get it delivered between 11:30 PM - 12:30 AM tonight! Charges specific to delivery area. T&C apply.</p>";break;case"4":i="Fix Date Delivery"==t?"<p>Free shipping for deliveries within India on selected date. T&C apply.</p>":"<p>Orders placed before 4 PM (IST) will be delivered on the same day. Orders placed after 4 PM (IST) will be delivered next day. Charges specific to delivery area. T&C apply.</p>"}var o='<a href="javascript:void(0)" data-tooltip="'+i+'">(?)</a>';return o}function selectCountryHandler(e){var t=e;$(t).hasClass("disabled")?$('input[name="countries"]').val(""):($('input[name="countries"]').val($(t).data("ccode")),countryCodeCheck($(t).data("cid"),$(t).data("ccode"),function(e){e&&($("#site-wrapper").html(e),$("img.lazy").lazyload({effect:"fadeIn",container:$(".c-scroll-container")})),cartEmpty||getAddOnData(function(e){if(e){allowCheckout=!1,$("#addon-layer").html(e),$(".addon-carousel").slick({infinite:!0,slidesToShow:5,slidesToScroll:5,accessibility:!1,dots:!0,arrows:!0}).resize(),$("ul.tabs").tabs(),$("#open-addon").parent().removeClass("invisible");var i=$(".c-scroll-container").data("cart-pin"),o=$(".c-scroll-container").data("cart-sdate"),n=$(".c-scroll-container").data("cart-stype"),s=$(".c-scroll-container").data("cart-scity"),a=$(".c-scroll-container").data("cart-stime"),r=$(".c-scroll-container").data("cart-scountry"),l=$(".c-scroll-container").data("cart-flag");$(".addon-scountry").val(r),$(".addon-pincode").val(i),$(".addon-sdate").val(o),$(".addon-stype").val(n),$(".addon-scity").val(s),$(".addon-stime").val(a),l?($("#enabled-button").addClass("hide"),$("#disabled-button").removeClass("hide")):($("#enabled-button").removeClass("hide"),$("#disabled-button").addClass("hide")),$(".addon-carousel").on("afterChange",function(){var e=$(".addon-image:eq(0)").height();$(".addon-image").css("min-height",e+"px"),$(".addon-image").lazyload({effect:"fadeIn",container:$(".ao-list")}),$(".addon-image").on("load",function(){$(t).css("min-height","0")})})}else $("#open-addon").parent().addClass("invisible")})}))}var allowCheckout=!1,countriesHash={},countriesHashCode={},countriesArr=[];$(document).ready(function(){function e(e,t,i,o,n){$.ajax({url:e,method:t,data:JSON.stringify(i),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){o.find(".c-item-u-overlay").addClass("show")},success:function(e,t,i){n(e)},error:function(e){console.log("error : "+JSON.stringify(e))}})}function t(e,t,i,o,n){$.ajax({url:e,method:t,data:JSON.stringify(i),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){o.find(".c-item-u-overlay").addClass("show")},success:function(e,t,i){n(e)},error:function(e){console.log("error : "+JSON.stringify(e))}})}function i(e,t,i){$.ajax({url:e,method:t,contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){$("#cart-overlay").addClass("show")},success:function(e,t,o){i(e)},error:function(e){console.log("error")}})}function o(e,t){$.ajax({url:"/c/addon/personalized",method:"POST",data:JSON.stringify(t),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(t){$("#c-add-on-overlay-p-"+e).addClass("show")},success:function(t,i,o){console.log(JSON.stringify(t)),"Success"===t.status&&($("#a-o-pers-item-"+e).removeClass("active"),$("#c-add-on-overlay-p-"+e).removeClass("show"),$("#a-o-sel-p-"+e).removeClass("hide"),$("#open-"+e).removeClass("hide"),$("#submit-"+e).addClass("hide"))},error:function(e){console.log("error")}})}function n(e,t,i,o){$.ajax({url:e,method:t,data:JSON.stringify(i),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){$("#c-add-on-overlay-"+i.pid).addClass("show")},success:function(e,t,i){o(e)},error:function(e){console.log("error : "+JSON.stringify(e))}})}function s(e,t,i,o){var n={pid:i,attr:{}};$.ajax({url:e,method:t,data:JSON.stringify(n),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){$("#c-add-on-overlay-"+i).addClass("show"),$("#c-add-on-overlay-p-"+i).addClass("show")},success:function(e,t,i){o(e)},error:function(e){console.log("error : "+JSON.stringify(e))}})}function a(e){var t="/c/addon/pers",i="POST",o={pid:e};$.ajax({url:t,method:i,data:JSON.stringify(o),contentType:"application/json; charset=UTF-8",async:!0,cache:!0,beforeSend:function(e){console.log("before Send")},success:function(t,i,o){$("#pers-"+e).html(t)},error:function(e){console.log("error")}})}init();var r=JSON.parse(sessionStorage.ccdata);r.countries.forEach(function(e){countriesHash[e.name]=e.id,countriesHashCode[e.name]=e.code}),countriesArr=Object.keys(countriesHash),$("#prcd2Cart").on("click",function(){$(".cart").css("display","none"),$(".checkout").css("display","block")}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,threshold:200}),$("ul.tabs").tabs(),$("#site-wrapper").on("mouseover",".hover-tooltip a",function(){initTooltip($(this))}),$("#site-wrapper").on("mouseover",function(e){return $(e.target).parents(".hover-tooltip").length>0||$(e.target).is(".hover-tooltip")||$(e.target).is(".info-window")||$(e.target).parents(".info-window").length>0?!1:void setTimeout(function(){$(".info-window").hide()},100)}),cartEmpty||getAddOnData(function(e){if(e){allowCheckout=!1,$("#addon-layer").html(e),$(".addon-carousel").slick({infinite:!0,slidesToShow:5,slidesToScroll:5,accessibility:!1,dots:!0,arrows:!0}).resize(),$(".addon-carousel").on("afterChange",function(){var e=$(".addon-image:eq(0)").height();$(".addon-image").css("min-height",e+"px"),$(".addon-image").lazyload({effect:"fadeIn",container:$(".ao-list")}),$(".addon-image").on("load",function(){$(this).css("min-height","0")})}),$("ul.tabs").tabs(),$("#open-addon").parent().removeClass("invisible");var t=$(".c-scroll-container").data("cart-pin"),i=$(".c-scroll-container").data("cart-sdate"),o=$(".c-scroll-container").data("cart-stype"),n=$(".c-scroll-container").data("cart-scity"),s=$(".c-scroll-container").data("cart-stime"),a=$(".c-scroll-container").data("cart-flag"),r=$(".c-scroll-container").data("cart-scountry");$(".addon-pincode").val(t),$(".addon-sdate").val(i),$(".addon-stype").val(o),$(".addon-scity").val(n),$(".addon-stime").val(s),$(".addon-scountry").val(r),a?($("#enabled-button").addClass("hide"),$("#disabled-button").removeClass("hide")):($("#enabled-button").removeClass("hide"),$("#disabled-button").addClass("hide")),$(".addon-image").lazyload({effect:"fadeIn",container:$(".ao-list")})}else $("#open-addon").parent().addClass("invisible")}),$("#site-wrapper").on("click",".edit-pin",function(){$("#p-code-label").addClass("hide"),$("#p-code-form").removeClass("hide"),$("#pin-code").focus().select()}),$("#site-wrapper").on("click",".toggle-country-pin-button",function(){var e=this,t=$(e).attr("data-alternate-text"),i=$(e).html();$(e).attr("data-alternate-text",i),$(e).html(t),$("#p-code-label .country-holder").hasClass("hide")?($("#p-code-label .country-holder").removeClass("hide"),$("#p-code-label .p-code-holder").addClass("hide")):($("#p-code-label .country-holder").addClass("hide"),$("#p-code-label .p-code-holder").removeClass("hide"))}),$("#site-wrapper").on("click",".close-pin",function(){$("#p-code-form").addClass("hide");var e=$("#pin-code").attr("data-pin");$("#pin-code").val(e),$("#pin-code").removeClass("error"),$("#p-code-label").removeClass("hide")}),$("#site-wrapper").on("change",".g-box",function(){var t=$(this).parents(".c-item"),i=t.find(".cart-item-form"),o=t.find(".cart-item-form > input[name=pid]").val(),n=processData(i.serializeArray()),s=JSON.parse(n);$(this).prop("checked")?s.gbox=1:s.gbox=0,console.log(s.gbox),s.attr=JSON.parse(s.attr),s.scountry=""==s.scountry?0:parseInt(s.scountry),s.sdate=formateDate(s.sdate);var a="/c",r="PUT";e(a,r,s,t,function(e){if(e)for(var i in e.plist)if(o==e.plist[i].p.id&&JSON.stringify(s.attr)==JSON.stringify(e.plist[i].attr)){if(t.find(".cart-item-form > input[name=qty]").val(e.plist[i].qty),t.find(".c-item-qty-val").val(parseInt(e.plist[i].qty)),t.find(".c-item-qty-val").attr("value",e.plist[i].qty),t.find(".c-item-qty-val").attr("data-qty",e.plist[i].qty),t.find(".s-total-val").text(getCartPagePrice(e.plist[i],"stotal",currency)),t.find(".c-item-u-overlay").removeClass("show"),$("#cart-total-val").text(getCartPagePrice(e,"total",currency)),$(".total-cart-value span").text(getCartPagePrice(e,"total",currency)),"USD"==currency)var n=currencyConfig[currency]+"3.00";else var n=currencyConfig[currency]+" 199";0==e.plist[i].gbox?(t.find(".add-box").next("label").text("Send this in a gift box ("+n+")"),t.find(".add-box").attr("checked",!1),t.find(".cart-item-form > input[name=gbox]").val(0),$(".info-window .info-window-content").html(t.find(".price-breakup a").data("tooltip")),$(".info-window .giftbox-info").addClass("hide"),t.find(".price-breakup a").data("tooltip",$(".info-window .info-window-content").html())):1==e.plist[i].gbox&&(t.find(".add-box").next("label").text("Send this in a gift box ("+n+")"),t.find(".add-box").attr("checked",!0),t.find(".cart-item-form > input[name=gbox]").val(1),$(".info-window .info-window-content").html(t.find(".price-breakup a").data("tooltip")),$(".info-window .giftbox-info").removeClass("hide"),t.find(".price-breakup a").data("tooltip",$(".info-window .info-window-content").html()))}})}),$("input[type=text].qty").keypress(function(e){for(var t=[],i=e.which,o=48;58>o;o++)t.push(o);t.indexOf(i)>=0||e.preventDefault()}),$("#site-wrapper").on("click",".inc-quantity",function(t){var i=$(this).parents(".c-item"),o=i.find(".cart-item-form"),n=i.find(".cart-item-form > input[name=pid]").val(),s=parseInt(i.find(".c-item-qty-val").val()),a=processData(o.serializeArray()),r=JSON.parse(a);r.qty=s+1,r.attr=JSON.parse(r.attr),r.scountry=""==r.scountry?0:parseInt(r.scountry),r.sdate=formateDate(r.sdate);var l="/c",c="PUT";i.find(".c-item-qty-error").removeClass("show-error"),e(l,c,r,i,function(e){if(e)for(var t in e.plist)n==e.plist[t].p.id&&JSON.stringify(r.attr)==JSON.stringify(e.plist[t].attr)&&(i.find(".cart-item-form > input[name=qty]").val(e.plist[t].qty),i.find(".c-item-qty-val").val(parseInt(e.plist[t].qty)),i.find(".c-item-qty-val").attr("value",e.plist[t].qty),i.find(".c-item-qty-val").attr("data-qty",e.plist[t].qty),i.find(".s-total-val").text(getCartPagePrice(e.plist[t],"stotal",currency)),i.find(".c-item-u-overlay").removeClass("show"),$("#cart-total-val").text(getCartPagePrice(e,"total",currency)),$(".total-cart-value span").text(getCartPagePrice(e,"total",currency)),0==e.plist[t].gbox?i.find(".add-box").attr("checked",!1):1==e.plist[t].gbox&&i.find(".add-box").attr("checked",!0))})}),$("#site-wrapper").on("click",".des-quantity",function(t){var i=$(this).parents(".c-item"),o=i.find(".cart-item-form"),n=i.find(".cart-item-form > input[name=pid]").val(),s=parseInt(i.find(".c-item-qty-val").val()),a=processData(o.serializeArray());if(s>1){i.find(".c-item-qty-error").removeClass("show-error");var r=JSON.parse(a);r.qty=s-1,r.scountry=""==r.scountry?0:parseInt(r.scountry),r.attr=JSON.parse(r.attr),r.sdate=formateDate(r.sdate);var l="/c",c="PUT";e(l,c,r,i,function(e){if(e)for(var t in e.plist)n==e.plist[t].p.id&&JSON.stringify(r.attr)==JSON.stringify(e.plist[t].attr)&&(i.find(".cart-item-form > input[name=qty]").val(e.plist[t].qty),i.find(".c-item-qty-val").val(parseInt(e.plist[t].qty)),i.find(".c-item-qty-val").attr("value",e.plist[t].qty),i.find(".c-item-qty-val").attr("data-qty",e.plist[t].qty),i.find(".s-total-val").text(getCartPagePrice(e.plist[t],"stotal",currency)),i.find(".c-item-u-overlay").removeClass("show"),$("#cart-total-val").text(getCartPagePrice(e,"total",currency)),$(".total-cart-value span").text(getCartPagePrice(e,"total",currency)),0==e.plist[t].gbox?i.find(".add-box").attr("checked",!1):1==e.plist[t].gbox&&i.find(".add-box").attr("checked",!0))})}else if(1==s){i.find(".c-item-qty-error").removeClass("show-error");var n=$(this).data("pid");i.find(".c-item-overlay").addClass("c-show")}else i.find(".c-item-qty-error").addClass("show-error")}),$("#site-wrapper").on("keypress",".qty",function(t){if(13==t.keyCode){var i=$(this).parents(".c-item"),o=i.find(".cart-item-form"),n=i.find(".cart-item-form > input[name=pid]").val(),s=parseInt(i.find(".c-item-qty-val").val());if(s>0){var a=processData(o.serializeArray()),r=JSON.parse(a);r.scountry=""==r.scountry?0:parseInt(r.scountry),r.qty=s,r.attr=JSON.parse(r.attr),r.sdate=formateDate(r.sdate);var l="/c",c="PUT";i.find(".c-item-qty-error").removeClass("show-error"),e(l,c,r,i,function(e){if(e)for(var t in e.plist)n==e.plist[t].p.id&&JSON.stringify(r.attr)==JSON.stringify(e.plist[t].attr)&&(i.find(".cart-item-form > input[name=qty]").val(e.plist[t].qty),i.find(".c-item-qty-val").val(parseInt(e.plist[t].qty)),i.find(".c-item-qty-val").attr("value",e.plist[t].qty),i.find(".c-item-qty-val").attr("data-qty",e.plist[t].qty),i.find(".c-item-qty-val").blur(),i.find(".s-total-val").text(getCartPagePrice(e.plist[t],"stotal",currency)),i.find(".c-item-u-overlay").removeClass("show"),$("#cart-total-val").text(getCartPagePrice(e,"total",currency)),$(".total-cart-value span").text(getCartPagePrice(e,"total",currency)),0==e.plist[t].gbox?i.find(".add-box").attr("checked",!1):1==e.plist[t].gbox&&i.find(".add-box").attr("checked",!0))})}else 0==s&&i.find(".c-item-overlay").addClass("c-show")}}),$("#site-wrapper").on("focusout",".qty",function(t){var i=$(this).parents(".c-item"),o=i.find(".cart-item-form"),n=i.find(".cart-item-form > input[name=pid]").val(),s=parseInt(i.find(".c-item-qty-val").val()),a=$(this).attr("data-qty"),s=$(this).val();if(""==s)$(this).val(a);else if(s!=a){var i=$(this).parents(".c-item"),o=i.find(".cart-item-form"),r=processData(o.serializeArray()),l=JSON.parse(r);l.qty=s,l.attr=JSON.parse(l.attr),l.scountry=""==l.scountry?0:parseInt(l.scountry),l.sdate=formateDate(l.sdate);var c="/c",d="PUT";if(0==l.qty){var u=$(this).parents(".c-item");u.find(".c-item-overlay").addClass("c-show")}else i.find(".c-item-qty-error").removeClass("show-error"),e(c,d,l,i,function(e){if(e)for(var t in e.plist)n==e.plist[t].p.id&&JSON.stringify(l.attr)==JSON.stringify(e.plist[t].attr)&&(i.find(".cart-item-form > input[name=qty]").val(e.plist[t].qty),i.find(".c-item-qty-val").val(parseInt(e.plist[t].qty)),i.find(".c-item-qty-val").attr("value",e.plist[t].qty),i.find(".c-item-qty-val").attr("data-qty",e.plist[t].qty),i.find(".s-total-val").text(getCartPagePrice(e.plist[t],"stotal",currency)),i.find(".c-item-u-overlay").removeClass("show"),$("#cart-total-val").text(getCartPagePrice(e,"total",currency)),$(".total-cart-value span").text(getCartPagePrice(e,"total",currency)),0==e.plist[t].gbox?i.find(".add-box").attr("checked",!1):1==e.plist[t].gbox&&i.find(".add-box").attr("checked",!0))})}}),$("#site-wrapper").on("click",".del-c-item",function(){var e=($(this).data("pid"),$(this).parents(".c-item"));e.find(".c-item-overlay").addClass("c-show")}),$("#site-wrapper").on("click",".cancel",function(){var e=($(this).data("pid"),$(this).parents(".c-item"));e.find(".c-item-overlay").removeClass("c-show")}),$("#site-wrapper").on("click",".remove-c",function(){var e="/c",i="DELETE",o=$(this).parents(".c-item"),n=o.find(".cart-item-form > input[name=pid]").val(),s=o.find(".cart-item-form > input[name=attr]").val();s=JSON.parse(s);var a={pid:n,attr:s},r=$(this).parents(".c-item").data("pname"),l=$(this).parents(".c-item").data("pprice"),c=$(this).parents(".c-item").data("pqty"),d=gaProductDetail(r,n,l,c);t(e,i,a,o,function(e){gaProdRemoveCart(d),e&&(e.cartEmpty?resetCartPage():(buildCartItemsList(e),$("#a-o-sel-"+a.pid).addClass("hide"),getAddOnData(function(e){if(e){allowCheckout=!1,$("#addon-layer").html(e),$(".addon-carousel").slick({infinite:!0,slidesToShow:5,slidesToScroll:5,accessibility:!1,dots:!0,arrows:!0}).resize(),$("ul.tabs").tabs(),$("#open-addon").parent().removeClass("invisible");var t=$(".c-scroll-container").data("cart-pin"),i=$(".c-scroll-container").data("cart-sdate"),o=$(".c-scroll-container").data("cart-stype"),n=$(".c-scroll-container").data("cart-scity"),s=$(".c-scroll-container").data("cart-stime"),a=$(".c-scroll-container").data("cart-flag"),r=$(".c-scroll-container").data("cart-scountry");$(".addon-pincode").val(t),$(".addon-sdate").val(i),$(".addon-stype").val(o),$(".addon-scity").val(n),$(".addon-stime").val(s),$(".addon-scountry").val(r),a?($("#enabled-button").addClass("hide"),$("#disabled-button").removeClass("hide")):($("#enabled-button").removeClass("hide"),$("#disabled-button").addClass("hide")),$(".addon-carousel").on("afterChange",function(){var e=$(".addon-image:eq(0)").height();$(".addon-image").css("min-height",e+"px"),$(".addon-image").lazyload({effect:"fadeIn",container:$(".ao-list")}),$(".addon-image").on("load",function(){$(this).css("min-height","0")})})}else $("#open-addon").parent().addClass("invisible")})))})}),$("#site-wrapper").on("submit","#full-size-pin-form",function(e){if(e.preventDefault(),$.fn.fmValidate.init("#full-size-pin-form")){$("#pin-error").text("");var t=parseInt($("#full-size-pin-code").val());if(0!=t){var o="/c/pin?pin="+t,n="PUT";i(o,n,function(e){e&&($("#site-wrapper").html(e),$("img.lazy").lazyload({effect:"fadeIn",container:$(".c-scroll-container")}),cartEmpty||getAddOnData(function(e){if(e){allowCheckout=!1,$("#addon-layer").html(e),$(".addon-carousel").slick({infinite:!0,slidesToShow:5,slidesToScroll:5,accessibility:!1,dots:!0,arrows:!0}).resize(),$("ul.tabs").tabs(),$("#open-addon").parent().removeClass("invisible");var t=$(".c-scroll-container").data("cart-pin"),i=$(".c-scroll-container").data("cart-sdate"),o=$(".c-scroll-container").data("cart-stype"),n=$(".c-scroll-container").data("cart-scity"),s=$(".c-scroll-container").data("cart-stime"),a=$(".c-scroll-container").data("cart-flag"),r=$(".c-scroll-container").data("cart-scountry");$(".addon-pincode").val(t),$(".addon-sdate").val(i),$(".addon-stype").val(o),$(".addon-scity").val(n),$(".addon-stime").val(s),$(".addon-scountry").val(r),a?($("#enabled-button").addClass("hide"),$("#disabled-button").removeClass("hide")):($("#enabled-button").removeClass("hide"),$("#disabled-button").addClass("hide")),$(".addon-carousel").on("afterChange",function(){var e=$(".addon-image:eq(0)").height();$(".addon-image").css("min-height",e+"px"),$(".addon-image").lazyload({effect:"fadeIn",container:$(".ao-list")}),$(".addon-image").on("load",function(){$(this).css("min-height","0")})})}else $("#open-addon").parent().addClass("invisible")}))})}else $("#full-size-pin-code").addClass("error"),$("#full-size-pin-code").addClass("error-animation"),setTimeout(function(){$("#full-size-pin-code").removeClass("error-animation")},300)}}),$("#site-wrapper").on("submit","#pin-form",function(e){if(e.preventDefault(),$.fn.fmValidate.init("#pin-form")){$("#pin-error").text("");var t=parseInt($("#pin-code").val());if(0!=t){var o="/c/pin?pin="+t,n="PUT";i(o,n,function(e){e&&($("#site-wrapper").html(e),$("img.lazy").lazyload({effect:"fadeIn",container:$(".c-scroll-container")}),cartEmpty||getAddOnData(function(e){if(e){allowCheckout=!1,$("#addon-layer").html(e),$(".addon-carousel").slick({infinite:!0,slidesToShow:5,slidesToScroll:5,accessibility:!1,dots:!0,arrows:!0}).resize(),$("ul.tabs").tabs(),$("#open-addon").parent().removeClass("invisible");var t=$(".c-scroll-container").data("cart-pin"),i=$(".c-scroll-container").data("cart-sdate"),o=$(".c-scroll-container").data("cart-stype"),n=$(".c-scroll-container").data("cart-scity"),s=$(".c-scroll-container").data("cart-stime"),a=$(".c-scroll-container").data("cart-flag"),r=$(".c-scroll-container").data("cart-scountry");$(".addon-pincode").val(t),$(".addon-sdate").val(i),$(".addon-stype").val(o),$(".addon-scity").val(n),$(".addon-stime").val(s),$(".addon-scountry").val(r),a?($("#enabled-button").addClass("hide"),$("#disabled-button").removeClass("hide")):($("#enabled-button").removeClass("hide"),$("#disabled-button").addClass("hide")),$(".addon-carousel").on("afterChange",function(){var e=$(".addon-image:eq(0)").height();$(".addon-image").css("min-height",e+"px"),$(".addon-image").lazyload({effect:"fadeIn",container:$(".ao-list")}),$(".addon-image").on("load",function(){$(this).css("min-height","0")})})}else $("#open-addon").parent().addClass("invisible")}))})}else $("#pin-code").addClass("error"),$("#pin-code").addClass("error-animation"),setTimeout(function(){$("#pin-code").removeClass("error-animation")},300)}}),$("#site-wrapper").on("click","#close-addon",function(){$(".a-o-body").removeClass("active")}),$("#site-wrapper").on("click","#skip-addon",function(){$(".a-o-body").removeClass("active"),document.cookie="addon=skip"}),$("#site-wrapper").on("click","#open-addon",function(){$(".a-o-body").addClass("active")}),$("#site-wrapper").on("click",".a-o-pers",function(){var e=$(this).data("pid");$(this).parents(".a-o-card").addClass("active"),$(this).addClass("hide"),$("#submit-"+e).removeClass("hide");var e=$(this).data("pid");a(e)}),$("#site-wrapper").on("click",".a-o-pers-edit",function(){var e=$(this).data("pid");$(this).parents(".a-o-card").addClass("active"),
$("#a-o-sel-p-"+e).addClass("hide"),$("#open-"+e).addClass("hide"),$("#submit-"+e).removeClass("hide")}),$("#site-wrapper").on("click",".a-o-close",function(){$(this).parents(".a-o-card").removeClass("active");var e=$(this).data("pid");$("#open-"+e).removeClass("hide"),$("#submit-"+e).addClass("hide")}),$("#site-wrapper").on("click",".pers-submit",function(){var e=$(this).data("pid"),t=$("#cart").val(),i=0;console.log(e);var n=$("#pers-"+e).find("input[type=text].a-o-text-field");console.log(n);var s={pid:e},a=new Array;$(n).each(function(e,t){if($(t).is(":invalid"))return $(t).focus(),$(t).addClass("error"),i++,!1;$(t).removeClass("error");var o=$(t).data("field-id"),n=$(t).val(),s={sid:o,data:n};a.push(s)}),s.steps=a,s.cart=t,console.log(s),1>i&&o(e,s)}),$("#site-wrapper").on("click",".a-o-add",function(){var e=$(this).data("pid"),t=processData($("#addon-"+e).serializeArray()),i=JSON.parse(t);i.attr=JSON.parse(i.attr),console.log(i);var o="/c/add2",s="POST";n(o,s,i,function(t){console.log("test"),t&&(console.log(JSON.stringify(t)),$("#c-add-on-overlay-"+e).removeClass("show"),$("#a-o-sel-"+e).removeClass("hide"),buildCartItemsList(t))})}),$("#site-wrapper").on("click",".r-add-on",function(){var e=$(this).data("pid"),t="/c/addon",i="DELETE";s(t,i,e,function(t){t&&($("#c-add-on-overlay-"+e).removeClass("show"),$("#a-o-sel-"+e).addClass("hide"),buildCartItemsList(t))})}),$("#site-wrapper").on("click",".r-add-on-p",function(){var e=$(this).data("pid"),t="/c?pid="+e,i="DELETE";s(t,i,e,function(t){t&&($("#c-add-on-overlay-p-"+e).removeClass("show"),$("#a-o-sel-p-"+e).addClass("hide"))})}),$("#site-wrapper").on("click","#cartCheckoutBtn",function(){var e=0===$(".c-item.error").length;if(e)getCookie("addon")||$(".addon-container").hasClass("invisible")||allowCheckout?window.location="/checkout":$("#open-addon").click();else{console.log("Product Error occured !");var t="Remove Products which are not deliverable to the selected pincode";$(".total-cart-value").addClass("relative").append('<div class="carterror">'+t+"</div>"),console.log(t)}}),$("#site-wrapper").on("click","#enabled-button .c-btn-po",function(){allowCheckout=!0,$("#a-o-body").removeClass("active"),$("#cartCheckoutBtn").click()})});;